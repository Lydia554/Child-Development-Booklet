(function(){"use strict";var e={5315:function(e,t,a){var o=a(3751),i=a(641);const r={key:0};function s(e,t,a,o,s,n){const l=(0,i.g2)("router-link"),d=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)("div",null,[o.showNavigation?((0,i.uX)(),(0,i.CE)("nav",r,[o.authStore.isAuthenticated?((0,i.uX)(),(0,i.Wv)(l,{key:0,to:"/dashboard"},{default:(0,i.k6)((()=>t[1]||(t[1]=[(0,i.eW)("Dashboard")]))),_:1})):(0,i.Q3)("",!0),o.authStore.isAuthenticated&&!o.hasChild?((0,i.uX)(),(0,i.Wv)(l,{key:1,to:"/child-registration"},{default:(0,i.k6)((()=>t[2]||(t[2]=[(0,i.eW)("Registracija deteta")]))),_:1})):(0,i.Q3)("",!0),o.authStore.isAuthenticated&&o.hasChild&&!o.isDashboard?((0,i.uX)(),(0,i.CE)(i.FK,{key:2},[(0,i.bF)(l,{to:`/milestone-form/${o.childId}`},{default:(0,i.k6)((()=>t[3]||(t[3]=[(0,i.eW)("Dodaj Ključni Momenat")]))),_:1},8,["to"]),(0,i.bF)(l,{to:`/milestone-list/${o.childId}`},{default:(0,i.k6)((()=>t[4]||(t[4]=[(0,i.eW)("Pregled Ključnog Momenta")]))),_:1},8,["to"]),(0,i.bF)(l,{to:`/child-development-form/${o.childId}`},{default:(0,i.k6)((()=>t[5]||(t[5]=[(0,i.eW)("Unos razvoja deteta")]))),_:1},8,["to"]),(0,i.bF)(l,{to:`/child-development-list/${o.childId}`},{default:(0,i.k6)((()=>t[6]||(t[6]=[(0,i.eW)("Pregled razvoja")]))),_:1},8,["to"]),(0,i.bF)(l,{to:`/child-overview/${o.childId}`},{default:(0,i.k6)((()=>t[7]||(t[7]=[(0,i.eW)("Pregled sve Dece")]))),_:1},8,["to"])],64)):(0,i.Q3)("",!0),o.authStore.isAuthenticated?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(l,{key:3,to:"/login"},{default:(0,i.k6)((()=>t[8]||(t[8]=[(0,i.eW)("Prijavite se")]))),_:1})),o.authStore.isAuthenticated?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(l,{key:4,to:"/"},{default:(0,i.k6)((()=>t[9]||(t[9]=[(0,i.eW)("Registrujte se")]))),_:1})),o.authStore.isAuthenticated?((0,i.uX)(),(0,i.CE)("button",{key:5,onClick:t[0]||(t[0]=(...e)=>o.logout&&o.logout(...e)),class:"logout-btn"},"Odjavi se")):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),(0,i.bF)(d)])}a(4114);var n=a(810);const l=(0,n.nY)("auth",{state:()=>({isAuthenticated:!1,token:null,childIds:[],currentChildId:null}),getters:{hasChild:e=>e.childIds.length>0,childId:e=>e.currentChildId},actions:{login(e,t=null){e?(console.log("🔑 Čuvanje tokena u authStore:",e),this.isAuthenticated=!0,this.token=e,sessionStorage.setItem("token",e),t&&this.addChildId(t)):console.error("❌ Pokušaj da se sačuva undefined token!")},logout(){console.log("🚪 Odjava, brisanje tokena..."),this.isAuthenticated=!1,this.token=null,this.childIds=[],this.currentChildId=null,sessionStorage.removeItem("token"),sessionStorage.removeItem("childId"),sessionStorage.removeItem("childIds")},checkAuth(){const e=sessionStorage.getItem("token"),t=sessionStorage.getItem("childId"),a=JSON.parse(sessionStorage.getItem("childIds")||"[]");e?(console.log("✅ Token pronađen u sessionStorage:",e),this.isAuthenticated=!0,this.token=e,this.childIds=a,this.currentChildId=t||null):console.warn("⚠️ Token nije pronađen u sessionStorage.")},addChildId(e){this.childIds.includes(e)||(this.childIds.push(e),sessionStorage.setItem("childIds",JSON.stringify(this.childIds))),this.setCurrentChildId(e)},setCurrentChildId(e){this.currentChildId=e,sessionStorage.setItem("childId",e)}}});var d=a(5220),c={setup(){const e=l(),t=(0,d.rd)(),a=(0,d.lq)(),o=(0,i.EW)((()=>e.childId||sessionStorage.getItem("childId"))),r=(0,i.EW)((()=>!!o.value)),s=(0,i.EW)((()=>"dashboard"===a.name)),n=(0,i.EW)((()=>"login"!==a.name&&"signup"!==a.name&&("dashboard"===a.name||e.isAuthenticated&&r.value))),c=()=>{e.logout(),sessionStorage.removeItem("token"),sessionStorage.removeItem("childId"),t.push("/login")};return e.checkAuth(),{authStore:e,logout:c,childId:o,hasChild:r,isDashboard:s,showNavigation:n}}},h=a(6262);const u=(0,h.A)(c,[["render",s],["__scopeId","data-v-20e88d7d"]]);var m=u,p=a(33);const v={class:"dashboard-container"},g={key:0},k={key:1,class:"error-message"},f={key:2},b={class:"dashboard-links"},D={class:"links-grid"},y={class:"register-another-child"},E={key:3,class:"error-message"};function C(e,t,a,o,r,s){const n=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",v,[t[8]||(t[8]=(0,i.Lk)("h2",null,"Dobrodošli na Dashboard",-1)),o.loading?((0,i.uX)(),(0,i.CE)("div",g,"Loading...")):o.errorMessage?((0,i.uX)(),(0,i.CE)("div",k,(0,p.v_)(o.errorMessage),1)):o.currentChild&&o.currentChild._id?((0,i.uX)(),(0,i.CE)("div",f,[(0,i.Lk)("h3",null,"Opcije za dete: "+(0,p.v_)(o.currentChild.name),1),(0,i.Lk)("div",b,[(0,i.Lk)("div",D,[(0,i.bF)(n,{to:`/milestone-form/${o.currentChild._id}`,class:"dashboard-link"},{default:(0,i.k6)((()=>t[0]||(t[0]=[(0,i.eW)("Dodaj Ključni Momenat")]))),_:1},8,["to"]),(0,i.bF)(n,{to:`/milestone-list/${o.currentChild._id}`,class:"dashboard-link"},{default:(0,i.k6)((()=>t[1]||(t[1]=[(0,i.eW)("Pregled Ključnog Momenta")]))),_:1},8,["to"]),(0,i.bF)(n,{to:`/child-development-form/${o.currentChild._id}`,class:"dashboard-link"},{default:(0,i.k6)((()=>t[2]||(t[2]=[(0,i.eW)("Unos razvoja deteta")]))),_:1},8,["to"]),(0,i.bF)(n,{to:`/child-development-list/${o.currentChild._id}`,class:"dashboard-link"},{default:(0,i.k6)((()=>t[3]||(t[3]=[(0,i.eW)("Pregled razvoja")]))),_:1},8,["to"]),(0,i.bF)(n,{to:`/child-overview/${o.currentChild._id}`,class:"dashboard-link"},{default:(0,i.k6)((()=>t[4]||(t[4]=[(0,i.eW)("Pregled sve Dece")]))),_:1},8,["to"])])]),(0,i.Lk)("div",y,[(0,i.bF)(n,{to:"/child-registration",class:"dashboard-link"},{default:(0,i.k6)((()=>t[5]||(t[5]=[(0,i.eW)("Registruj Još Jedno Dete")]))),_:1})])])):((0,i.uX)(),(0,i.CE)("div",E,[t[7]||(t[7]=(0,i.Lk)("p",null,"Nema podataka o detetu. Molimo proverite unos ili registrujte dete.",-1)),(0,i.bF)(n,{to:"/child-registration",class:"dashboard-link"},{default:(0,i.k6)((()=>t[6]||(t[6]=[(0,i.eW)("Registruj Dete")]))),_:1})]))])}var I=a(4335),L=a(953),A={setup(){const e=l(),t=(0,L.KR)(!0),a=(0,L.KR)(null),o=(0,L.KR)(""),r=async()=>{try{const t=e.childId;if(!t)return void(o.value="Nema registrovanog deteta. Molimo registrujte dete.");const i=await I.A.get(`https://child-development-backend.fly.dev/api/${t}`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});a.value=i.data}catch(i){console.error("❌ Greška prilikom učitavanja deteta:",i),o.value="Greška prilikom učitavanja podataka."}finally{t.value=!1}};return(0,i.sV)((()=>{r()})),(0,i.wB)((()=>e.childId),(async e=>{e&&await r()})),{loading:t,currentChild:a,errorMessage:o}}};const j=(0,h.A)(A,[["render",C],["__scopeId","data-v-2df359a6"]]);var w=j;const P={class:"signup-container"},_={key:0,class:"error-message"},$={class:"password-container"},M=["type"],z={key:0,class:"error-message"},X={key:1,class:"error-message"},F=["disabled"],S={class:"login-link"};function N(e,t,a,r,s,n){return(0,i.uX)(),(0,i.CE)("div",P,[t[14]||(t[14]=(0,i.Lk)("h2",null,"Registrujte se",-1)),(0,i.Lk)("form",{onSubmit:t[10]||(t[10]=(0,o.D$)(((...e)=>n.registerUser&&n.registerUser(...e)),["prevent"]))},[(0,i.bo)((0,i.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.email=e),placeholder:"Email",required:"",onBlur:t[1]||(t[1]=(...e)=>n.validateEmail&&n.validateEmail(...e)),onInput:t[2]||(t[2]=(...e)=>n.validateForm&&n.validateForm(...e))},null,544),[[o.Jo,s.email]]),s.emailError?((0,i.uX)(),(0,i.CE)("div",_,(0,p.v_)(s.emailError),1)):(0,i.Q3)("",!0),(0,i.Lk)("div",$,[(0,i.bo)((0,i.Lk)("input",{type:s.passwordVisible?"text":"password","onUpdate:modelValue":t[3]||(t[3]=e=>s.password=e),placeholder:"Lozinka",required:"",onBlur:t[4]||(t[4]=(...e)=>n.validatePassword&&n.validatePassword(...e)),onInput:t[5]||(t[5]=(...e)=>n.validateForm&&n.validateForm(...e))},null,40,M),[[o.hp,s.password]]),(0,i.Lk)("label",null,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>s.passwordVisible=e)},null,512),[[o.lH,s.passwordVisible]]),t[12]||(t[12]=(0,i.eW)(" Prikaži lozinku "))]),s.passwordError?((0,i.uX)(),(0,i.CE)("div",z,(0,p.v_)(s.passwordError),1)):(0,i.Q3)("",!0)]),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>s.name=e),placeholder:"Ime",required:"",onBlur:t[8]||(t[8]=(...e)=>n.validateName&&n.validateName(...e)),onInput:t[9]||(t[9]=(...e)=>n.validateForm&&n.validateForm(...e))},null,544),[[o.Jo,s.name]]),s.nameError?((0,i.uX)(),(0,i.CE)("div",X,(0,p.v_)(s.nameError),1)):(0,i.Q3)("",!0),(0,i.Lk)("button",{type:"submit",disabled:s.hasErrors},"Registrujte se",8,F)],32),(0,i.Lk)("div",S,[(0,i.Lk)("p",null,[t[13]||(t[13]=(0,i.eW)("Već imate nalog? ")),(0,i.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>n.navigateToLogin&&n.navigateToLogin(...e))},"Ulogujte se")])])])}var T={data(){return{name:"",email:"",password:"",passwordVisible:!1,errorMessage:"",emailError:null,passwordError:null,nameError:null,hasErrors:!0}},methods:{validateEmail(){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;this.email.trim()?e.test(this.email)?this.emailError=null:(this.emailError="Unesite validan email.",this.hasErrors=!0):(this.emailError="Email je obavezan.",this.hasErrors=!0)},validatePassword(){this.password.trim()?this.password.length<6?(this.passwordError="Lozinka mora imati najmanje 6 karaktera.",this.hasErrors=!0):this.passwordError=null:(this.passwordError="Lozinka je obavezna.",this.hasErrors=!0)},validateName(){this.name.trim()?this.nameError=null:(this.nameError="Ime je obavezno.",this.hasErrors=!0)},validateForm(){this.validateEmail(),this.validatePassword(),this.validateName(),this.hasErrors=!!(this.emailError||this.passwordError||this.nameError)},async registerUser(){if(this.validateForm(),!this.hasErrors)try{await I.A.post("https://child-development-backend.fly.dev/api/users/register",{name:this.name,email:this.email,password:this.password},{headers:{"Content-Type":"application/json"}});0;const e=await I.A.post("https://child-development-backend.fly.dev/api/users/login",{email:this.email,password:this.password}),t=e.data.token;sessionStorage.setItem("token",t);const a=l();a.login(t),this.$router.push("/child-registration")}catch(e){0,e.response?(console.log("Error response data:",e.response.data),this.errorMessage=e.response.data.message||"Došlo je do greške na serveru"):e.request?this.errorMessage="Nema odgovora od servera":this.errorMessage=e.message}},navigateToLogin(){this.$router.push("/login")}}};const B=(0,h.A)(T,[["render",N],["__scopeId","data-v-1bf97c54"]]);var q=B;const W={class:"login-container"},O={class:"password-container"},U=["type"],R={key:0,class:"register-button-container"};function Q(e,t,a,r,s,n){return(0,i.uX)(),(0,i.CE)("div",W,[t[8]||(t[8]=(0,i.Lk)("h2",null,"Prijavite se",-1)),(0,i.Lk)("form",{onSubmit:t[3]||(t[3]=(0,o.D$)(((...e)=>n.loginUser&&n.loginUser(...e)),["prevent"]))},[(0,i.bo)((0,i.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.email=e),placeholder:"Email",required:""},null,512),[[o.Jo,s.email]]),(0,i.Lk)("div",O,[(0,i.bo)((0,i.Lk)("input",{type:s.passwordVisible?"text":"password","onUpdate:modelValue":t[1]||(t[1]=e=>s.password=e),placeholder:"Lozinka",required:""},null,8,U),[[o.hp,s.password]]),(0,i.Lk)("label",null,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>s.passwordVisible=e)},null,512),[[o.lH,s.passwordVisible]]),t[5]||(t[5]=(0,i.eW)(" Prikaži lozinku "))])]),t[6]||(t[6]=(0,i.Lk)("button",{type:"submit"},"Prijavite se",-1))],32),s.showRegisterButton?((0,i.uX)(),(0,i.CE)("div",R,[t[7]||(t[7]=(0,i.Lk)("p",null,"Nema registrovane dece. Molimo vas da registrujete dete.",-1)),(0,i.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.redirectToChildRegistration&&n.redirectToChildRegistration(...e))},"Registrujte dete")])):(0,i.Q3)("",!0)])}var V={data(){return{email:"",password:"",passwordVisible:!1,errorMessage:"",showRegisterButton:!1}},methods:{async loginUser(){try{const e=await I.A.post("https://child-development-backend.fly.dev/api/users/login",{email:this.email,password:this.password}),t=e.data.token;sessionStorage.setItem("token",t);const a=l();a.login(t);const o=await I.A.get("https://child-development-backend.fly.dev/api",{headers:{Authorization:`Bearer ${t}`}});if(o.data&&o.data.length>0){const e=o.data[0];a.addChildId(e._id),this.$router.push("/dashboard")}else console.log("No children found, showing register button."),this.showRegisterButton=!0}catch(e){console.error("❌ Login error:",e),this.errorMessage=e.response?.data?.message||"Pogrešan email ili lozinka."}},redirectToChildRegistration(){this.$router.push("/child-registration")}}};const K=(0,h.A)(V,[["render",Q],["__scopeId","data-v-30e4ae82"]]);var x=K;const J={class:"development-container"},Y={class:"development-title"},G={key:0,class:"development-data"},H={key:1},Z={class:"navigation-buttons"};function ee(e,t,a,o,r,s){const n=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",J,[(0,i.Lk)("h2",Y,"Razvoj Deteta - Period: "+(0,p.v_)(a.startAge)+"-"+(0,p.v_)(r.endAge)+" Meseci",1),r.developmentData.length?((0,i.uX)(),(0,i.CE)("div",G,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.developmentData,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e._id,class:"development-item"},[(0,i.Lk)("p",null,[t[0]||(t[0]=(0,i.Lk)("strong",null,"Fizički razvoj:",-1)),(0,i.eW)(" "+(0,p.v_)(e.physicalDevelopment),1)]),(0,i.Lk)("p",null,[t[1]||(t[1]=(0,i.Lk)("strong",null,"Emocionalni razvoj:",-1)),(0,i.eW)(" "+(0,p.v_)(e.emotionalDevelopment),1)]),(0,i.Lk)("p",null,[t[2]||(t[2]=(0,i.Lk)("strong",null,"Intelektualni razvoj:",-1)),(0,i.eW)(" "+(0,p.v_)(e.intellectualDevelopment),1)]),(0,i.Lk)("p",null,[t[3]||(t[3]=(0,i.Lk)("strong",null,"Socijalni razvoj:",-1)),(0,i.eW)(" "+(0,p.v_)(e.socialDevelopment),1)])])))),128))])):((0,i.uX)(),(0,i.CE)("div",H,t[4]||(t[4]=[(0,i.Lk)("p",{class:"no-data-message"},"Nema podataka za ovaj period.",-1)]))),(0,i.Lk)("div",Z,[a.startAge>0?((0,i.uX)(),(0,i.Wv)(n,{key:0,to:s.previousPeriod,class:"nav-button"},{default:(0,i.k6)((()=>t[5]||(t[5]=[(0,i.eW)("Prethodni period")]))),_:1},8,["to"])):(0,i.Q3)("",!0),(0,i.bF)(n,{to:s.nextPeriod,class:"nav-button"},{default:(0,i.k6)((()=>t[6]||(t[6]=[(0,i.eW)("Sledeći period")]))),_:1},8,["to"])])])}var te={props:["childId","startAge"],data(){return{developmentData:[],endAge:parseInt(this.startAge)+6}},computed:{nextPeriod(){return`/child-development/${this.childId}/${this.endAge}`},previousPeriod(){return`/child-development/${this.childId}/${this.startAge-6}`}},created(){this.fetchDevelopmentData()},methods:{async fetchDevelopmentData(){try{const e=await I.A.get(`https://child-development-backend.fly.dev/api/child-development/${this.childId}/${this.startAge}`);this.developmentData=e.data}catch(e){console.error("Greška pri dobijanju podataka:",e)}}}};const ae=(0,h.A)(te,[["render",ee],["__scopeId","data-v-1d5f8aa0"]]);var oe=ae;const ie={class:"milestone-form-container"},re={class:"form-group"},se={key:0,class:"error-message"},ne={class:"form-group"},le={key:0,class:"error-message"},de={class:"form-group"},ce={key:0,class:"error-message"},he={class:"form-group"},ue={class:"button-group"},me=["disabled"];function pe(e,t,a,r,s,n){return(0,i.uX)(),(0,i.CE)("div",ie,[(0,i.Lk)("h2",null,(0,p.v_)(s.isEditing?"Izmeni Kljucni Momenat":"Dodaj Kljucni Momenat"),1),(0,i.Lk)("form",{onSubmit:t[8]||(t[8]=(0,o.D$)(((...e)=>n.submitForm&&n.submitForm(...e)),["prevent"])),class:"milestone-form"},[(0,i.Lk)("div",re,[t[9]||(t[9]=(0,i.Lk)("label",{for:"milestoneType"},"Tip Ključnog Momenta:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.milestone.milestoneType=e),type:"text",id:"milestoneType",required:"",placeholder:"Npr. Prvi korak, Prva reč...",onBlur:t[1]||(t[1]=(...e)=>n.validateMilestoneType&&n.validateMilestoneType(...e))},null,544),[[o.Jo,s.milestone.milestoneType]]),s.milestoneTypeError?((0,i.uX)(),(0,i.CE)("div",se,(0,p.v_)(s.milestoneTypeError),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",ne,[t[10]||(t[10]=(0,i.Lk)("label",{for:"milestoneDate"},"Datum:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.milestone.milestoneDate=e),type:"date",id:"milestoneDate",required:"",onBlur:t[3]||(t[3]=(...e)=>n.validateMilestoneDate&&n.validateMilestoneDate(...e))},null,544),[[o.Jo,s.milestone.milestoneDate]]),s.milestoneDateError?((0,i.uX)(),(0,i.CE)("div",le,(0,p.v_)(s.milestoneDateError),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",de,[t[11]||(t[11]=(0,i.Lk)("label",{for:"progress"},"Napredak:",-1)),(0,i.bo)((0,i.Lk)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.milestone.progress=e),id:"progress",required:"",placeholder:"Opišite napredak...",onBlur:t[5]||(t[5]=(...e)=>n.validateProgress&&n.validateProgress(...e))},null,544),[[o.Jo,s.milestone.progress]]),s.progressError?((0,i.uX)(),(0,i.CE)("div",ce,(0,p.v_)(s.progressError),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",he,[t[12]||(t[12]=(0,i.Lk)("label",{for:"notes"},"Napomene:",-1)),(0,i.bo)((0,i.Lk)("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.milestone.notes=e),id:"notes",placeholder:"Dodatne napomene..."},null,512),[[o.Jo,s.milestone.notes]])]),(0,i.Lk)("div",ue,[(0,i.Lk)("button",{type:"submit",class:"submit-btn",disabled:s.hasErrors},(0,p.v_)(s.isEditing?"Sačuvaj Izmene":"Dodaj Kljucni Momenat"),9,me),(0,i.Lk)("button",{type:"button",onClick:t[7]||(t[7]=(...e)=>n.goBack&&n.goBack(...e)),class:"cancel-btn"},"Otkaži")])],32)])}var ve={props:["childId","milestoneId"],data(){return{milestone:{milestoneType:"",milestoneDate:"",progress:"",notes:"",startAge:this.$route.query.startAge||0,endAge:this.$route.query.endAge||0,childId:this.childId},isEditing:!1,milestoneTypeError:null,milestoneDateError:null,progressError:null,hasErrors:!1}},async created(){if(this.milestoneId){this.isEditing=!0;try{const e=sessionStorage.getItem("token"),t=await I.A.get(`https://backend-solitary-wave-1128.fly.dev/api/milestones/${this.milestoneId}`,{headers:{Authorization:`Bearer ${e}`}});t.data&&(this.milestone={...t.data,milestoneDate:new Date(t.data.milestoneDate).toISOString().split("T")[0]})}catch(e){console.error("Error fetching milestone:",e)}}},methods:{validateMilestoneType(){this.milestone.milestoneType.trim()?this.milestoneTypeError=null:(this.milestoneTypeError="Tip momenta je obavezan.",this.hasErrors=!0)},validateMilestoneDate(){this.milestone.milestoneDate?this.milestoneDateError=null:(this.milestoneDateError="Datum je obavezan.",this.hasErrors=!0)},validateProgress(){this.milestone.progress.trim()?this.progressError=null:(this.progressError="Napredak je obavezan.",this.hasErrors=!0)},async submitForm(){if(this.validateMilestoneType(),this.validateMilestoneDate(),this.validateProgress(),!this.hasErrors)try{const e=sessionStorage.getItem("token"),t={Authorization:`Bearer ${e}`};this.isEditing?await I.A.put(`https://child-development-backend.fly.dev/api/milestones/${this.milestoneId}`,this.milestone,{headers:t}):await I.A.post(`https://child-development-backend.fly.dev/api/milestones/${this.childId}`,this.milestone,{headers:t}),this.$router.push(`/child-development-list/${this.childId}`)}catch(e){console.error("Error saving milestone:",e)}},formatPeriod(e,t){return`${e}-${t} meseci`},goBack(){this.$router.push(`/child-development-list/${this.childId}`)}}};const ge=(0,h.A)(ve,[["render",pe],["__scopeId","data-v-24b10382"]]);var ke=ge;const fe={class:"milestone-list-container"},be={key:0,class:"milestone-list"},De={class:"button-group"},ye=["onClick"],Ee=["onClick"],Ce={key:1,class:"no-data-message"};function Ie(e,t,a,o,r,s){const n=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",fe,[t[4]||(t[4]=(0,i.Lk)("h2",null,"Pregled Ključnih Momenata",-1)),r.milestones.length?((0,i.uX)(),(0,i.CE)("div",be,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.milestones,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e._id,class:"milestone-item"},[(0,i.Lk)("h3",null,(0,p.v_)(e.milestoneType)+" - "+(0,p.v_)(s.formatDate(e.milestoneDate)),1),(0,i.Lk)("p",null,[t[0]||(t[0]=(0,i.Lk)("strong",null,"Napredak:",-1)),(0,i.eW)(" "+(0,p.v_)(e.progress),1)]),(0,i.Lk)("p",null,[t[1]||(t[1]=(0,i.Lk)("strong",null,"Napomene:",-1)),(0,i.eW)(" "+(0,p.v_)(e.notes),1)]),(0,i.Lk)("div",De,[(0,i.Lk)("button",{onClick:t=>s.editMilestone(e._id),class:"edit-btn"},"Izmeni",8,ye),(0,i.Lk)("button",{onClick:t=>s.confirmDelete(e._id),class:"delete-btn"},"Obriši",8,Ee)])])))),128))])):((0,i.uX)(),(0,i.CE)("div",Ce,t[2]||(t[2]=[(0,i.Lk)("p",null,"Nema podataka o Ključnim Momentima za ovo dete.",-1)]))),(0,i.bF)(n,{to:`/milestone-form/${r.childId}`,class:"add-milestone-button"},{default:(0,i.k6)((()=>t[3]||(t[3]=[(0,i.eW)(" Dodaj Ključni Momenat ")]))),_:1},8,["to"])])}a(8111),a(2489);var Le={data(){return{milestones:[],childId:null}},created(){this.childId=this.$route.params.childId,this.childId?this.fetchMilestones():this.$router.push("/child-registration")},methods:{async fetchMilestones(){try{const e=sessionStorage.getItem("token"),t=await I.A.get(`https://child-development-backend.fly.dev/api/milestones/${this.childId}`,{headers:{Authorization:`Bearer ${e}`}});this.milestones=t.data}catch(e){console.error("Error fetching milestones:",e)}},formatDate(e){if(!e)return"";const t=new Date(e);return`${t.getDate()}/${t.getMonth()+1}/${t.getFullYear()}`},editMilestone(e){this.$router.push(`/milestone-form/${this.childId}/${e}`)},async deleteMilestone(e){try{const t=sessionStorage.getItem("token");await I.A.delete(`https://child-development-backend.fly.dev/api/milestones/${e}`,{headers:{Authorization:`Bearer ${t}`}});this.milestones=this.milestones.filter((t=>t._id!==e))}catch(t){console.error("Error deleting milestone:",t)}},async confirmDelete(e){window.confirm("Da li ste sigurni da želite da obrišete ovaj milestone?")&&await this.deleteMilestone(e)}}};const Ae=(0,h.A)(Le,[["render",Ie],["__scopeId","data-v-6ca668be"]]);var je=Ae;const we={class:"development-form"},Pe={key:0},_e={key:1},$e={key:2,class:"error-message"},Me={class:"form-group"},ze={key:0,class:"error-message"},Xe={class:"form-group"},Fe={key:0,class:"error-message"},Se={class:"form-group"},Ne={key:0,class:"error-message"},Te={class:"form-group"},Be={key:0,class:"error-message"},qe=["disabled"];function We(e,t,a,r,s,n){return(0,i.uX)(),(0,i.CE)("div",we,[t[13]||(t[13]=(0,i.Lk)("h2",null,"Unos Razvoja Deteta",-1)),n.currentPeriod?((0,i.uX)(),(0,i.CE)("h3",Pe,"Trenutni period: "+(0,p.v_)(n.currentPeriod.startAge)+" - "+(0,p.v_)(n.currentPeriod.endAge)+" meseci",1)):(0,i.Q3)("",!0),n.childAgeInMonths?((0,i.uX)(),(0,i.CE)("h3",_e,"Trenutna starost deteta: "+(0,p.v_)(n.childAgeInMonths)+" meseci",1)):(0,i.Q3)("",!0),s.error?((0,i.uX)(),(0,i.CE)("div",$e,(0,p.v_)(s.error),1)):(0,i.Q3)("",!0),(0,i.Lk)("form",{onSubmit:t[8]||(t[8]=(0,o.D$)(((...e)=>n.saveDevelopment&&n.saveDevelopment(...e)),["prevent"]))},[(0,i.Lk)("div",Me,[t[9]||(t[9]=(0,i.Lk)("label",{for:"physicalDevelopment"},"Fizički razvoj:",-1)),(0,i.bo)((0,i.Lk)("textarea",{id:"physicalDevelopment","onUpdate:modelValue":t[0]||(t[0]=e=>s.formData.physicalDevelopment=e),required:"",onInput:t[1]||(t[1]=e=>n.validateInput("physicalDevelopment"))},null,544),[[o.Jo,s.formData.physicalDevelopment]]),s.physicalError?((0,i.uX)(),(0,i.CE)("div",ze,(0,p.v_)(s.physicalError),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Xe,[t[10]||(t[10]=(0,i.Lk)("label",{for:"emotionalDevelopment"},"Emocionalni razvoj:",-1)),(0,i.bo)((0,i.Lk)("textarea",{id:"emotionalDevelopment","onUpdate:modelValue":t[2]||(t[2]=e=>s.formData.emotionalDevelopment=e),required:"",onInput:t[3]||(t[3]=e=>n.validateInput("emotionalDevelopment"))},null,544),[[o.Jo,s.formData.emotionalDevelopment]]),s.emotionalError?((0,i.uX)(),(0,i.CE)("div",Fe,(0,p.v_)(s.emotionalError),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Se,[t[11]||(t[11]=(0,i.Lk)("label",{for:"intellectualDevelopment"},"Intelektualni razvoj:",-1)),(0,i.bo)((0,i.Lk)("textarea",{id:"intellectualDevelopment","onUpdate:modelValue":t[4]||(t[4]=e=>s.formData.intellectualDevelopment=e),required:"",onInput:t[5]||(t[5]=e=>n.validateInput("intellectualDevelopment"))},null,544),[[o.Jo,s.formData.intellectualDevelopment]]),s.intellectualError?((0,i.uX)(),(0,i.CE)("div",Ne,(0,p.v_)(s.intellectualError),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Te,[t[12]||(t[12]=(0,i.Lk)("label",{for:"socialDevelopment"},"Socijalni razvoj:",-1)),(0,i.bo)((0,i.Lk)("textarea",{id:"socialDevelopment","onUpdate:modelValue":t[6]||(t[6]=e=>s.formData.socialDevelopment=e),required:"",onInput:t[7]||(t[7]=e=>n.validateInput("socialDevelopment"))},null,544),[[o.Jo,s.formData.socialDevelopment]]),s.socialError?((0,i.uX)(),(0,i.CE)("div",Be,(0,p.v_)(s.socialError),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("button",{type:"submit",disabled:s.loading||s.hasErrors},(0,p.v_)(s.loading?"Čuvanje...":"Sačuvaj"),9,qe)],32)])}a(116);var Oe={data(){return{childName:null,childAge:null,developmentData:[],milestoneData:[],availablePeriods:[],selectedPeriod:null,childBirthDate:null,error:null,loading:!1,hasErrors:!1,formData:{physicalDevelopment:"",emotionalDevelopment:"",intellectualDevelopment:"",socialDevelopment:""},physicalError:null,emotionalError:null,intellectualError:null,socialError:null}},computed:{currentPeriod(){return this.selectedPeriod?this.developmentData.find((e=>e.startAge===this.selectedPeriod.start&&e.endAge===this.selectedPeriod.end)):null},childAgeInMonths(){return this.childAge}},methods:{validateInput(e){this.formData[e].trim()?(this[`${e}Error`]=null,this.hasErrors=!1):(this[`${e}Error`]=`${e} is required`,this.hasErrors=!0)},async saveDevelopment(){const{childId:e}=this.$route.params,t={startAge:this.selectedPeriod.start,endAge:this.selectedPeriod.end,physicalDevelopment:this.formData.physicalDevelopment,emotionalDevelopment:this.formData.emotionalDevelopment,intellectualDevelopment:this.formData.intellectualDevelopment,socialDevelopment:this.formData.socialDevelopment};try{const a=l(),o=a.token;0,await I.A.post(`https://child-development-backend.fly.dev/api/child-development/${e}`,t,{headers:{Authorization:`Bearer ${o}`}}),this.$router.push({path:`/child-development-list/${e}`,query:{periodStart:this.selectedPeriod.start,periodEnd:this.selectedPeriod.end}})}catch(a){console.error("❌ Error saving development:",a),this.error="There was an error saving the development data."}},async fetchChildData(e){try{const t=l(),a=t.token;0;const o=await I.A.get(`https://child-development-backend.fly.dev/api/${e}`,{headers:{Authorization:`Bearer ${a}`}});o.data&&(this.childName=o.data.name,this.childAge=this.calculateAgeInMonths(o.data.birthDate),this.childBirthDate=o.data.birthDate,this.generateAvailablePeriods())}catch(t){console.error("❌ Error fetching child data:",t)}},async fetchDevelopmentData(e){try{const t=l(),a=t.token;0;const o=await I.A.get(`https://child-development-backend.fly.dev/api/child-development/${e}`,{headers:{Authorization:`Bearer ${a}`}});this.developmentData=o.data||[],this.selectedPeriod=this.availablePeriods.find((e=>this.childAge>=e.start&&this.childAge<e.end))}catch(t){console.error("❌ Error fetching development data:",t)}},async fetchMilestones(e){try{const t=l(),a=t.token;0;const o=await I.A.get(`https://child-development-backend.fly.dev/api/milestones/${e}`,{headers:{Authorization:`Bearer ${a}`}});this.milestoneData=o.data||[]}catch(t){console.error("❌ Error fetching milestones:",t)}},getMilestonesForPeriod(e){if(!this.childBirthDate)return console.warn("⚠️ Child birth date is missing, cannot filter milestones."),[];const t=new Date(this.childBirthDate),a=new Date(t);a.setMonth(a.getMonth()+e.start);const o=new Date(t);o.setMonth(o.getMonth()+e.end);const i=this.milestoneData.filter((e=>{const t=new Date(e.milestoneDate);return t>=a&&t<o}));return i},calculateAgeInMonths(e){if(!e)return 0;const t=new Date(e),a=new Date;return 12*(a.getFullYear()-t.getFullYear())+(a.getMonth()-t.getMonth())},generateAvailablePeriods(){if(null!==this.childAge){this.availablePeriods=[];for(let e=0;e<=72;e+=6)this.availablePeriods.push({start:e,end:e+6})}},formatPeriod(e,t){return`${e}-${t} meseci`}},async created(){try{const e=this.$route.params.childId;e&&(await this.fetchChildData(e),await this.fetchDevelopmentData(e))}catch(e){console.error("❌ Error in created():",e)}}};const Ue=(0,h.A)(Oe,[["render",We],["__scopeId","data-v-94362100"]]);var Re=Ue;const Qe={class:"development-container"},Ve={class:"child-info"},Ke={class:"period-selector"},xe={class:"periods-list"},Je=["onClick","disabled"],Ye={key:0},Ge={key:1},He={key:2},Ze={key:3},et={key:0,class:"period-data"},tt={key:0,class:"development-section"},at={class:"development-details"},ot={class:"development-item"},it={class:"development-item"},rt={class:"development-item"},st={class:"development-item"},nt={class:"button-group"},lt={key:1},dt={key:2,class:"milestones-section"},ct={class:"milestone-list"},ht={class:"button-group"},ut=["onClick"],mt=["onClick"],pt={key:3,class:"no-records"},vt={key:0};function gt(e,t,a,o,r,s){return(0,i.uX)(),(0,i.CE)("div",Qe,[(0,i.Lk)("h2",null,"Praćenje Razvoja za dete "+(0,p.v_)(r.childName||"Nepoznato dete"),1),(0,i.Lk)("div",Ve,[(0,i.Lk)("h3",null,(0,p.v_)(r.childName),1),(0,i.Lk)("p",null,[t[5]||(t[5]=(0,i.Lk)("strong",null,"Starost:",-1)),(0,i.eW)(" "+(0,p.v_)(r.childAge?r.childAge+" meseci":"Nepoznata starost"),1)])]),(0,i.Lk)("div",Ke,[t[6]||(t[6]=(0,i.Lk)("h3",null,"Izaberite period:",-1)),(0,i.Lk)("div",xe,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.availablePeriods,(e=>((0,i.uX)(),(0,i.CE)("button",{key:`${e.start}-${e.end}`,class:(0,p.C4)(s.getPeriodClass(e)),onClick:t=>s.selectPeriod(e),disabled:s.isFuturePeriod(e)},[(0,i.eW)((0,p.v_)(s.formatPeriod(e.start,e.end))+" ",1),s.isFilledPeriod(e)?((0,i.uX)(),(0,i.CE)("span",Ye,"✔ Ispunjeno")):s.isCurrentPeriod(e)?((0,i.uX)(),(0,i.CE)("span",Ge,"🟢 Trenutni period")):s.isFuturePeriod(e)?((0,i.uX)(),(0,i.CE)("span",He,"🚫 Nedostupan")):((0,i.uX)(),(0,i.CE)("span",Ze,"❌ Neispunjeno"))],10,Je)))),128))])]),r.selectedPeriod?((0,i.uX)(),(0,i.CE)("div",et,[(0,i.Lk)("h3",null,"Razvoj za period: "+(0,p.v_)(s.formatPeriod(r.selectedPeriod.start,r.selectedPeriod.end)),1),s.currentPeriodDevelopment?((0,i.uX)(),(0,i.CE)("div",tt,[t[11]||(t[11]=(0,i.Lk)("h4",null,"Razvoj deteta",-1)),(0,i.Lk)("div",at,[(0,i.Lk)("div",ot,[t[7]||(t[7]=(0,i.Lk)("h5",null,"Fizički razvoj",-1)),(0,i.Lk)("p",null,(0,p.v_)(s.currentPeriodDevelopment.physicalDevelopment||"Nema podataka"),1)]),(0,i.Lk)("div",it,[t[8]||(t[8]=(0,i.Lk)("h5",null,"Emocionalni razvoj",-1)),(0,i.Lk)("p",null,(0,p.v_)(s.currentPeriodDevelopment.emotionalDevelopment||"Nema podataka"),1)]),(0,i.Lk)("div",rt,[t[9]||(t[9]=(0,i.Lk)("h5",null,"Intelektualni razvoj",-1)),(0,i.Lk)("p",null,(0,p.v_)(s.currentPeriodDevelopment.intellectualDevelopment||"Nema podataka"),1)]),(0,i.Lk)("div",st,[t[10]||(t[10]=(0,i.Lk)("h5",null,"Socijalni razvoj",-1)),(0,i.Lk)("p",null,(0,p.v_)(s.currentPeriodDevelopment.socialDevelopment||"Nema podataka"),1)]),(0,i.Lk)("div",nt,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=e=>s.editDevelopment(s.currentPeriodDevelopment)),class:"edit-btn"},"Izmeni"),(0,i.Lk)("button",{onClick:t[1]||(t[1]=e=>s.confirmDeleteDevelopment(s.currentPeriodDevelopment._id)),class:"delete-btn"},"Obriši")])])])):((0,i.uX)(),(0,i.CE)("div",lt,[s.isFilledPeriod(r.selectedPeriod)?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[2]||(t[2]=e=>s.navigateToDevelopmentForm(r.selectedPeriod)),class:"add-development-btn"},"Dodaj Razvoj"))])),s.currentPeriodMilestones.length?((0,i.uX)(),(0,i.CE)("div",dt,[t[14]||(t[14]=(0,i.Lk)("h4",null,"Ključni momenti za ovaj period",-1)),(0,i.Lk)("div",ct,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.currentPeriodMilestones,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e._id,class:"milestone-item"},[(0,i.Lk)("h3",null,(0,p.v_)(e.milestoneType)+" - "+(0,p.v_)(s.formatDate(e.milestoneDate)),1),(0,i.Lk)("p",null,[t[12]||(t[12]=(0,i.Lk)("strong",null,"Napredak:",-1)),(0,i.eW)(" "+(0,p.v_)(e.progress),1)]),(0,i.Lk)("p",null,[t[13]||(t[13]=(0,i.Lk)("strong",null,"Napomene:",-1)),(0,i.eW)(" "+(0,p.v_)(e.notes),1)]),(0,i.Lk)("div",ht,[(0,i.Lk)("button",{onClick:t=>s.editMilestone(e),class:"edit-btn"},"Izmeni",8,ut),(0,i.Lk)("button",{onClick:t=>s.confirmDeleteMilestone(e._id),class:"delete-btn"},"Obriši",8,mt)])])))),128))])])):((0,i.uX)(),(0,i.CE)("div",pt,[s.isFilledPeriod(r.selectedPeriod)?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("p",vt,"Nema unetih podataka za ovaj period.")),s.isFilledPeriod(r.selectedPeriod)?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:t[3]||(t[3]=e=>s.navigateToDevelopmentForm(r.selectedPeriod)),class:"add-development-btn"},"Dodaj Razvoj")),s.currentPeriodMilestones.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:2,onClick:t[4]||(t[4]=(...e)=>s.navigateToMilestoneForm&&s.navigateToMilestoneForm(...e)),class:"add-milestone-btn"},"Dodaj Ključni Momenat"))]))])):(0,i.Q3)("",!0)])}a(3579);var kt={data(){return{childName:null,childAge:null,developmentData:[],milestoneData:[],availablePeriods:[],selectedPeriod:null,childBirthDate:null}},computed:{currentPeriodDevelopment(){return this.selectedPeriod?this.developmentData.find((e=>e.startAge===this.selectedPeriod.start&&e.endAge===this.selectedPeriod.end)):null},currentPeriodMilestones(){if(!this.selectedPeriod)return[];const e=this.getMilestonesForPeriod(this.selectedPeriod);return e}},methods:{async fetchChildData(e){try{const t=l(),a=t.token;0;const o=await I.A.get(`https://child-development-backend.fly.dev/api/${e}`,{headers:{Authorization:`Bearer ${a}`}});o.data&&(this.childName=o.data.name,this.childAge=this.calculateAgeInMonths(o.data.birthDate),this.childBirthDate=o.data.birthDate,this.generateAvailablePeriods())}catch(t){console.error("❌ Error fetching child data:",t)}},async fetchDevelopmentData(e){try{const t=l(),a=t.token;0;const o=await I.A.get(`https://child-development-backend.fly.dev/api/child-development/${e}`,{headers:{Authorization:`Bearer ${a}`}});this.developmentData=o.data||[]}catch(t){console.error("❌ Error fetching development data:",t)}},async fetchMilestones(e){try{const t=l(),a=t.token;0;const o=await I.A.get(`https://child-development-backend.fly.dev/api/milestones/${e}`,{headers:{Authorization:`Bearer ${a}`}});this.milestoneData=o.data||[]}catch(t){console.error("❌ Error fetching milestones:",t)}},getMilestonesForPeriod(e){if(!this.childBirthDate)return console.warn("⚠️ Child birth date is missing, cannot filter milestones."),[];const t=new Date(this.childBirthDate),a=new Date(t);a.setMonth(a.getMonth()+e.start);const o=new Date(t);o.setMonth(o.getMonth()+e.end);const i=this.milestoneData.filter((e=>{const t=new Date(e.milestoneDate);return t>=a&&t<o}));return i},calculateStartDate(e){const t=new Date(this.childBirthDate);return t.setMonth(t.getMonth()+e),t},calculateEndDate(e){const t=new Date(this.childBirthDate);return t.setMonth(t.getMonth()+e),t},calculateAgeInMonths(e){if(!e)return 0;const t=new Date(e),a=new Date;return 12*(a.getFullYear()-t.getFullYear())+(a.getMonth()-t.getMonth())},generateAvailablePeriods(){if(null!==this.childAge){this.availablePeriods=[];for(let e=0;e<=72;e+=6)this.availablePeriods.push({start:e,end:e+6})}},async selectPeriod(e){this.selectedPeriod=e,await this.fetchMilestones(this.$route.params.childId),this.$forceUpdate()},formatPeriod(e,t){return`${e}-${t} meseci`},formatDate(e){return new Date(e).toLocaleDateString("sr-RS")},getPeriodClass(e){return this.isCurrentPeriod(e)?"period-button current":this.isFilledPeriod(e)?"period-button filled":this.isFuturePeriod(e)?"period-button future":"period-button past"},isCurrentPeriod(e){return this.childAge>=e.start&&this.childAge<e.end},isFilledPeriod(e){return this.developmentData.some((t=>t.startAge===e.start&&t.endAge===e.end))},isFuturePeriod(e){return this.childAge<e.start},navigateToDevelopmentForm(e){this.$router.push({path:`/child-development-form/${this.$route.params.childId}`,query:{startAge:e.start,endAge:e.end}})},navigateToMilestoneForm(){this.$router.push({path:`/milestone-form/${this.$route.params.childId}`})},async confirmDeleteDevelopment(e){window.confirm("Da li ste sigurni da želite da obrišete ove podatke o razvoju?")&&await this.deleteDevelopment(e)},async deleteDevelopment(e){try{const t=l(),a=t.token,o=this.$route.params.childId;await I.A.delete(`https://child-development-backend.fly.dev/api/child-development/${o}/${e}`,{headers:{Authorization:`Bearer ${a}`}}),await this.fetchDevelopmentData(o),await this.fetchMilestones(o)}catch(t){console.error("❌ Error deleting development data:",t)}},editDevelopment(e){e?this.$router.push({path:`/child-development-form/${this.$route.params.childId}`,query:{startAge:e.startAge,endAge:e.endAge}}):console.warn("⚠️ No development data available to edit.")},editMilestone(e){e?this.$router.push({path:`/milestone-form/${this.$route.params.childId}`,query:{milestoneId:e._id}}):console.warn("⚠️ No milestone data available to edit.")},async confirmDeleteMilestone(e){window.confirm("Da li ste sigurni da želite da obrišete ovaj ključni trenutak?")&&await this.deleteMilestone(e)},async deleteMilestone(e){try{const t=l(),a=t.token,o=this.$route.params.childId;await I.A.delete(`https://child-development-backend.fly.dev/api/milestones/${e}`,{headers:{Authorization:`Bearer ${a}`}}),await this.fetchMilestones(o),this.$forceUpdate()}catch(t){console.error("❌ Error deleting milestone:",t)}}},async created(){try{const e=this.$route.params.childId;e&&(await this.fetchChildData(e),await this.fetchDevelopmentData(e),await this.fetchMilestones(e))}catch(e){console.error("❌ Error in created():",e)}}};const ft=(0,h.A)(kt,[["render",gt],["__scopeId","data-v-4b3329d7"]]);var bt=ft;const Dt={class:"development-container"},yt={class:"period-selector"},Et={class:"periods-list"},Ct=["onClick","disabled"];function It(e,t,a,o,r,s){return(0,i.uX)(),(0,i.CE)("div",Dt,[(0,i.Lk)("h2",null,"Praćenje Razvoja za "+(0,p.v_)(r.childName||"Nepoznato dete"),1),(0,i.Lk)("div",yt,[t[0]||(t[0]=(0,i.Lk)("h3",null,"Izaberite period:",-1)),(0,i.Lk)("div",Et,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.availablePeriods,(e=>((0,i.uX)(),(0,i.CE)("button",{key:`${e.start}-${e.end}`,class:(0,p.C4)(s.getPeriodClass(e)),onClick:t=>s.selectPeriod(e),disabled:s.isFuturePeriod(e)},(0,p.v_)(s.formatPeriod(e.start,e.end)),11,Ct)))),128))])])])}var Lt={emits:["period-selected"],data(){return{childName:null,childAge:null,availablePeriods:[]}},methods:{async fetchChildData(e){try{const t=sessionStorage.getItem("token"),a=await I.A.get(`https://child-development-backend.fly.dev/api/${e}`,{headers:{Authorization:`Bearer ${t}`}});this.childName=a.data.name,this.childAge=this.calculateAgeInMonths(a.data.birthDate),this.generateAvailablePeriods()}catch(t){console.error("❌ Greška pri dobijanju podataka o detetu:",t)}},calculateAgeInMonths(e){const t=new Date(e),a=new Date;return 12*(a.getFullYear()-t.getFullYear())+(a.getMonth()-t.getMonth())},generateAvailablePeriods(){if(null!==this.childAge){this.availablePeriods=[];for(let e=0;e<=72;e+=6)this.availablePeriods.push({start:e,end:e+6})}},selectPeriod(e){this.$emit("period-selected",e)},formatPeriod(e,t){return`${e}-${t} meseci`},getPeriodClass(e){return this.isCurrentPeriod(e)?"period-button current":this.isFilledPeriod(e)?"period-button filled":this.isFuturePeriod(e)?"period-button future":"period-button past"},isCurrentPeriod(e){return this.childAge>=e.start&&this.childAge<e.end},isFilledPeriod(e){return this.childAge>=e.end},isFuturePeriod(e){return this.childAge<e.start}},async created(){const e=this.$route.params.childId;e&&await this.fetchChildData(e)}};const At=(0,h.A)(Lt,[["render",It]]);var jt=At;const wt={class:"registration-container"},Pt={key:0,class:"error-message"};function _t(e,t,a,r,s,n){return(0,i.uX)(),(0,i.CE)("div",wt,[t[4]||(t[4]=(0,i.Lk)("h2",null,"Registracija Deteta",-1)),s.errorMessage?((0,i.uX)(),(0,i.CE)("div",Pt,(0,p.v_)(s.errorMessage),1)):(0,i.Q3)("",!0),(0,i.Lk)("form",{onSubmit:t[2]||(t[2]=(0,o.D$)(((...e)=>n.registerChild&&n.registerChild(...e)),["prevent"]))},[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.name=e),placeholder:"Ime deteta",required:""},null,512),[[o.Jo,s.name]]),(0,i.bo)((0,i.Lk)("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>s.birthdate=e),required:""},null,512),[[o.Jo,s.birthdate]]),t[3]||(t[3]=(0,i.Lk)("button",{type:"submit"},"Registruj Dete",-1))],32)])}var $t={data(){return{name:"",birthdate:"",errorMessage:""}},methods:{async registerChild(){if(!this.name||!this.birthdate)return void(this.errorMessage="Ime i datum su obavezni.");const e=new Date(this.birthdate).toISOString();try{const t=await I.A.post("https://child-development-backend.fly.dev/api",{name:this.name,birthDate:e},{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});if(t.data){const e=l();e.addChildId(t.data._id),this.$router.push("/dashboard")}}catch(t){console.error("❌ Error registering child:",t),this.errorMessage="Došlo je do greške pri registraciji deteta."}}}};const Mt=(0,h.A)($t,[["render",_t],["__scopeId","data-v-8df8fd7c"]]);var zt=Mt;const Xt={class:"overview-container"},Ft={key:0},St={key:1,class:"error-message"},Nt={key:2},Tt={key:0,class:"select-container"},Bt=["value"],qt={key:0,class:"error-message"},Wt={key:1,class:"development-table"},Ot={key:2,class:"error-message"},Ut={key:3,class:"milestone-table"},Rt={key:4,class:"error-message"},Qt=["disabled"];function Vt(e,t,a,r,s,n){return(0,i.uX)(),(0,i.CE)("div",Xt,[(0,i.Lk)("h2",null,"Pregled razvoja deteta - "+(0,p.v_)(s.child.name||"Nepoznato dete"),1),s.loading?((0,i.uX)(),(0,i.CE)("div",Ft,"Učitavanje podataka...")):s.errorMessage?((0,i.uX)(),(0,i.CE)("div",St,(0,p.v_)(s.errorMessage),1)):((0,i.uX)(),(0,i.CE)("div",Nt,[s.children.length>0?((0,i.uX)(),(0,i.CE)("div",Tt,[t[3]||(t[3]=(0,i.Lk)("label",{for:"child-select"},"Izaberite dete:",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.selectedChildId=e),onChange:t[1]||(t[1]=(...e)=>n.onChildSelect&&n.onChildSelect(...e))},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.children,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e._id,value:e._id},(0,p.v_)(e.name),9,Bt)))),128))],544),[[o.u1,s.selectedChildId]]),s.selectedChildId&&!s.child?((0,i.uX)(),(0,i.CE)("div",qt,"Izaberite dete kako biste videli podatke.")):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),t[6]||(t[6]=(0,i.Lk)("h3",null,"Razvoj deteta",-1)),s.developmentData.length>0?((0,i.uX)(),(0,i.CE)("table",Wt,[t[4]||(t[4]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Period"),(0,i.Lk)("th",null,"Fizički razvoj"),(0,i.Lk)("th",null,"Emocionalni razvoj"),(0,i.Lk)("th",null,"Intelektualni razvoj"),(0,i.Lk)("th",null,"Socijalni razvoj")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.developmentData,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.startAge},[(0,i.Lk)("td",null,(0,p.v_)(e.startAge)+" - "+(0,p.v_)(e.endAge)+" meseci",1),(0,i.Lk)("td",null,(0,p.v_)(e.physicalDevelopment||"-"),1),(0,i.Lk)("td",null,(0,p.v_)(e.emotionalDevelopment||"-"),1),(0,i.Lk)("td",null,(0,p.v_)(e.intellectualDevelopment||"-"),1),(0,i.Lk)("td",null,(0,p.v_)(e.socialDevelopment||"-"),1)])))),128))])])):((0,i.uX)(),(0,i.CE)("div",Ot,"Nema podataka o razvoju za ovo dete.")),t[7]||(t[7]=(0,i.Lk)("h3",null,"Ključni momenti",-1)),s.milestoneData.length>0?((0,i.uX)(),(0,i.CE)("table",Ut,[t[5]||(t[5]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Tip momenta"),(0,i.Lk)("th",null,"Datum"),(0,i.Lk)("th",null,"Napredak"),(0,i.Lk)("th",null,"Napomene")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.milestoneData,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e._id},[(0,i.Lk)("td",null,(0,p.v_)(e.milestoneType),1),(0,i.Lk)("td",null,(0,p.v_)(n.formatDate(e.milestoneDate)),1),(0,i.Lk)("td",null,(0,p.v_)(e.progress||"-"),1),(0,i.Lk)("td",null,(0,p.v_)(e.notes||"-"),1)])))),128))])])):((0,i.uX)(),(0,i.CE)("div",Rt,"Nema ključnih momenata za ovo dete.")),(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.downloadPDF&&n.downloadPDF(...e)),class:"pdf-button",disabled:!s.developmentData.length||!s.milestoneData.length},"Preuzmi PDF",8,Qt)]))])}a(1701);var Kt=a(4323),xt=a(5708),Jt={data(){return{children:[],selectedChildId:"",child:{},developmentData:[],milestoneData:[],loading:!0,errorMessage:""}},async created(){await this.fetchChildren()},methods:{formatDate(e){return new Date(e).toLocaleDateString("sr-RS")},async fetchChildren(){try{const e=sessionStorage.getItem("token"),t=await I.A.get("https://child-development-backend.fly.dev/api/",{headers:{Authorization:`Bearer ${e}`}});this.children=t.data;const a=l();a.childId?this.selectedChildId=a.childId:this.children.length>0&&(this.selectedChildId=this.children[0]._id,a.setCurrentChildId(this.selectedChildId)),await this.fetchChildData(this.selectedChildId),await this.fetchDevelopmentData(this.selectedChildId),await this.fetchMilestones(this.selectedChildId)}catch(e){console.error("❌ Greška pri učitavanju dece:",e),this.errorMessage="Nije moguće učitati listu dece."}finally{this.loading=!1}},async fetchChildData(e){try{const t=sessionStorage.getItem("token"),a=await I.A.get(`https://child-development-backend.fly.dev/api/${e}`,{headers:{Authorization:`Bearer ${t}`}});if(!a.data||0===Object.keys(a.data).length)return void(this.errorMessage="Podaci o detetu nisu pronađeni.");this.child=a.data}catch(t){console.error("❌ Greška pri dobijanju podataka o detetu:",t),this.errorMessage="Nije moguće učitati podatke o detetu."}},async fetchDevelopmentData(e){try{const t=sessionStorage.getItem("token"),a=await I.A.get(`https://child-development-backend.fly.dev/api/child-development/${e}`,{headers:{Authorization:`Bearer ${t}`}});this.developmentData=a.data||[]}catch(t){console.error("❌ Greška pri dobijanju podataka o razvoju:",t),this.errorMessage="Nije moguće učitati razvojne podatke."}},async fetchMilestones(e){try{const t=sessionStorage.getItem("token"),a=await I.A.get(`https://child-development-backend.fly.dev/api/milestones/${e}`,{headers:{Authorization:`Bearer ${t}`}});this.milestoneData=a.data||[]}catch(t){console.error("❌ Greška pri dobijanju ključnih momenata:",t)}},async onChildSelect(){const e=l();e.setCurrentChildId(this.selectedChildId),await this.fetchChildData(this.selectedChildId),await this.fetchDevelopmentData(this.selectedChildId),await this.fetchMilestones(this.selectedChildId)},downloadPDF(){const e=new Kt.uE;e.setFont("FreeSerif"),e.text(`Razvoj deteta: ${this.child.name}`,10,10);const t=[["Period","Fizicki","Emocionalni","Intelektualni","Socijalni"],...this.developmentData.map((e=>[`${e.startAge}-${e.endAge} meseci`,e.physicalDevelopment||"-",e.emotionalDevelopment||"-",e.intellectualDevelopment||"-",e.socialDevelopment||"-"]))],a=[["Tip momenta","Datum","Napredak","Napomene"],...this.milestoneData.map((e=>[e.milestoneType,this.formatDate(e.milestoneDate),e.progress||"-",e.notes||"-"]))];(0,xt.Ay)(e,{head:[t[0]],body:t.slice(1),startY:20}),(0,xt.Ay)(e,{head:[a[0]],body:a.slice(1),startY:e.lastAutoTable.finalY+10}),e.save(`Razvoj_${this.child.name}.pdf`)}}};const Yt=(0,h.A)(Jt,[["render",Vt],["__scopeId","data-v-fde80e58"]]);var Gt=Yt;const Ht=[{path:"/",component:q,name:"signup",meta:{requiresAuth:!1,guestOnly:!0}},{path:"/login",component:x,name:"login",meta:{requiresAuth:!1,guestOnly:!0}},{path:"/dashboard",component:w,name:"dashboard",meta:{requiresAuth:!0}},{path:"/child-registration",component:zt,name:"child-registration",meta:{requiresAuth:!0}},{path:"/milestone-form/:childId/:milestoneId?",component:ke,name:"milestone-form",meta:{requiresAuth:!0,requiresChild:!0},props:!0},{path:"/milestone-list/:childId",component:je,name:"milestone-list",meta:{requiresAuth:!0,requiresChild:!0},props:!0},{path:"/child-development-list/:childId",component:bt,name:"ChildDevelopmentList",meta:{requiresAuth:!0,requiresChild:!0},props:!0},{path:"/child-development-page/:childId",component:oe,name:"child-development-page",meta:{requiresAuth:!0,requiresChild:!0},props:!0},{path:"/period",component:jt,name:"period",meta:{requiresAuth:!0,requiresChild:!0},props:!0},{path:"/child-overview/:childId",component:Gt,name:"child-overview",meta:{requiresAuth:!0,requiresChild:!0},props:!0},{path:"/add-development/:childId",name:"AddDevelopmentData",component:Re},{path:"/add-milestone/:childId",name:"AddMilestone",component:ke},{path:"/child-development-form/:childId",name:"ChildDevelopmentForm",component:Re},{path:"/child-development/:childId",name:"child-development",component:Re,props:!0,meta:{requiresAuth:!0}},{path:"/child-development-list/:childId",name:"ChildDevelopmentList",component:bt}],Zt=(0,d.aE)({history:(0,d.LA)(),routes:Ht});Zt.beforeEach(((e,t,a)=>{const o=l();!e.meta.requiresAuth||o.isAuthenticated?e.meta.guestOnly&&o.isAuthenticated?a("/dashboard"):!e.meta.requiresChild||o.hasChild?a():a("/child-registration"):a("/login")}));var ea=Zt;const ta=(0,o.Ef)(m);ta.use((0,n.Ey)()),ta.use(ea),ta.mount("#app")}},t={};function a(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,o,i,r){if(!o){var s=1/0;for(c=0;c<e.length;c++){o=e[c][0],i=e[c][1],r=e[c][2];for(var n=!0,l=0;l<o.length;l++)(!1&r||s>=r)&&Object.keys(a.O).every((function(e){return a.O[e](o[l])}))?o.splice(l--,1):(n=!1,r<s&&(s=r));if(n){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,i,r]}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(o,i){if(1&i&&(o=this(o)),8&i)return o;if("object"===typeof o&&o){if(4&i&&o.__esModule)return o;if(16&i&&"function"===typeof o.then)return o}var r=Object.create(null);a.r(r);var s={};e=e||[null,t({}),t([]),t(t)];for(var n=2&i&&o;"object"==typeof n&&!~e.indexOf(n);n=t(n))Object.getOwnPropertyNames(n).forEach((function(e){s[e]=function(){return o[e]}}));return s["default"]=function(){return o},a.d(r,s),r}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,o){return a.f[o](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{354:"33af619a",418:"1c7b5c0d",668:"3dfcdd11"}[e]+".js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="temeljna-knjizica:";a.l=function(o,i,r,s){if(e[o])e[o].push(i);else{var n,l;if(void 0!==r)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var h=d[c];if(h.getAttribute("src")==o||h.getAttribute("data-webpack")==t+r){n=h;break}}n||(l=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,a.nc&&n.setAttribute("nonce",a.nc),n.setAttribute("data-webpack",t+r),n.src=o),e[o]=[i];var u=function(t,a){n.onerror=n.onload=null,clearTimeout(m);var i=e[o];if(delete e[o],n.parentNode&&n.parentNode.removeChild(n),i&&i.forEach((function(e){return e(a)})),t)return t(a)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),l&&document.head.appendChild(n)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={524:0};a.f.j=function(t,o){var i=a.o(e,t)?e[t]:void 0;if(0!==i)if(i)o.push(i[2]);else{var r=new Promise((function(a,o){i=e[t]=[a,o]}));o.push(i[2]=r);var s=a.p+a.u(t),n=new Error,l=function(o){if(a.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var r=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;n.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",n.name="ChunkLoadError",n.type=r,n.request=s,i[1](n)}};a.l(s,l,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,r,s=o[0],n=o[1],l=o[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(i in n)a.o(n,i)&&(a.m[i]=n[i]);if(l)var c=l(a)}for(t&&t(o);d<s.length;d++)r=s[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},o=self["webpackChunktemeljna_knjizica"]=self["webpackChunktemeljna_knjizica"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[504],(function(){return a(5315)}));o=a.O(o)})();
//# sourceMappingURL=app.6b056ec1.js.map