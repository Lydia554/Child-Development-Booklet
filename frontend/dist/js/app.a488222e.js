(function(){"use strict";var e={1045:function(e,t,i){var o=i(3751),a=i(641);const r={key:0};function s(e,t,i,o,s,n){const l=(0,a.g2)("router-link"),d=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",null,[o.showNavigation?((0,a.uX)(),(0,a.CE)("nav",r,[o.authStore.isAuthenticated?((0,a.uX)(),(0,a.Wv)(l,{key:0,to:"/dashboard"},{default:(0,a.k6)((()=>t[1]||(t[1]=[(0,a.eW)("Dashboard")]))),_:1})):(0,a.Q3)("",!0),o.authStore.isAuthenticated&&!o.hasChild?((0,a.uX)(),(0,a.Wv)(l,{key:1,to:"/child-registration"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.eW)("Registracija deteta")]))),_:1})):(0,a.Q3)("",!0),o.authStore.isAuthenticated&&o.hasChild&&!o.isDashboard?((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[(0,a.bF)(l,{to:`/milestone-form/${o.childId}`},{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.eW)("Dodaj Ključni Momenat")]))),_:1},8,["to"]),(0,a.bF)(l,{to:`/milestone-list/${o.childId}`},{default:(0,a.k6)((()=>t[4]||(t[4]=[(0,a.eW)("Pregled Ključnog Momenta")]))),_:1},8,["to"]),(0,a.bF)(l,{to:`/child-development-form/${o.childId}`},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.eW)("Unos razvoja deteta")]))),_:1},8,["to"]),(0,a.bF)(l,{to:`/child-development-list/${o.childId}`},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.eW)("Pregled razvoja")]))),_:1},8,["to"]),(0,a.bF)(l,{to:`/child-overview/${o.childId}`},{default:(0,a.k6)((()=>t[7]||(t[7]=[(0,a.eW)("Pregled sve Dece")]))),_:1},8,["to"])],64)):(0,a.Q3)("",!0),o.authStore.isAuthenticated?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(l,{key:3,to:"/login"},{default:(0,a.k6)((()=>t[8]||(t[8]=[(0,a.eW)("Prijavite se")]))),_:1})),o.authStore.isAuthenticated?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(l,{key:4,to:"/"},{default:(0,a.k6)((()=>t[9]||(t[9]=[(0,a.eW)("Registrujte se")]))),_:1})),o.authStore.isAuthenticated?((0,a.uX)(),(0,a.CE)("button",{key:5,onClick:t[0]||(t[0]=(...e)=>o.logout&&o.logout(...e)),class:"logout-btn"},"Odjavi se")):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),(0,a.bF)(d)])}i(4114);var n=i(810);const l=(0,n.nY)("auth",{state:()=>({isAuthenticated:!1,token:null,childIds:[],currentChildId:null}),getters:{hasChild:e=>e.childIds.length>0,childId:e=>e.currentChildId},actions:{login(e,t=null){e?(console.log("🔑 Čuvanje tokena u authStore:",e),this.isAuthenticated=!0,this.token=e,sessionStorage.setItem("token",e),t&&this.addChildId(t)):console.error("❌ Pokušaj da se sačuva undefined token!")},logout(){console.log("🚪 Odjava, brisanje tokena..."),this.isAuthenticated=!1,this.token=null,this.childIds=[],this.currentChildId=null,sessionStorage.removeItem("token"),sessionStorage.removeItem("childId"),sessionStorage.removeItem("childIds")},checkAuth(){const e=sessionStorage.getItem("token"),t=sessionStorage.getItem("childId"),i=JSON.parse(sessionStorage.getItem("childIds")||"[]");e?(console.log("✅ Token pronađen u sessionStorage:",e),this.isAuthenticated=!0,this.token=e,this.childIds=i,this.currentChildId=t||null):console.warn("⚠️ Token nije pronađen u sessionStorage.")},addChildId(e){this.childIds.includes(e)||(this.childIds.push(e),sessionStorage.setItem("childIds",JSON.stringify(this.childIds))),this.setCurrentChildId(e)},setCurrentChildId(e){this.currentChildId=e,sessionStorage.setItem("childId",e)}}});var d=i(5220),c={setup(){const e=l(),t=(0,d.rd)(),i=(0,d.lq)(),o=(0,a.EW)((()=>e.childId||sessionStorage.getItem("childId"))),r=(0,a.EW)((()=>!!o.value)),s=(0,a.EW)((()=>"dashboard"===i.name)),n=(0,a.EW)((()=>"login"!==i.name&&"signup"!==i.name&&("dashboard"===i.name||e.isAuthenticated&&r.value))),c=()=>{e.logout(),sessionStorage.removeItem("token"),sessionStorage.removeItem("childId"),t.push("/login")};return e.checkAuth(),{authStore:e,logout:c,childId:o,hasChild:r,isDashboard:s,showNavigation:n}}},h=i(6262);const u=(0,h.A)(c,[["render",s],["__scopeId","data-v-7d9f8912"]]);var m=u,p=i(33);const v={class:"dashboard-container"},g={key:0},k={key:1,class:"error-message"},f={key:2},b={class:"dashboard-links"},D={class:"links-grid"},y={class:"register-another-child"},E={key:3,class:"error-message"};function I(e,t,i,o,r,s){const n=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",v,[t[8]||(t[8]=(0,a.Lk)("h2",null,"Dobrodošli na Dashboard",-1)),o.loading?((0,a.uX)(),(0,a.CE)("div",g,"Loading...")):o.errorMessage?((0,a.uX)(),(0,a.CE)("div",k,(0,p.v_)(o.errorMessage),1)):o.currentChild&&o.currentChild._id?((0,a.uX)(),(0,a.CE)("div",f,[(0,a.Lk)("h3",null,"Opcije za dete: "+(0,p.v_)(o.currentChild.name),1),(0,a.Lk)("div",b,[(0,a.Lk)("div",D,[(0,a.bF)(n,{to:`/milestone-form/${o.currentChild._id}`,class:"dashboard-link"},{default:(0,a.k6)((()=>t[0]||(t[0]=[(0,a.eW)("Dodaj Ključni Momenat")]))),_:1},8,["to"]),(0,a.bF)(n,{to:`/milestone-list/${o.currentChild._id}`,class:"dashboard-link"},{default:(0,a.k6)((()=>t[1]||(t[1]=[(0,a.eW)("Pregled Ključnog Momenta")]))),_:1},8,["to"]),(0,a.bF)(n,{to:`/child-development-form/${o.currentChild._id}`,class:"dashboard-link"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.eW)("Unos razvoja deteta")]))),_:1},8,["to"]),(0,a.bF)(n,{to:`/child-development-list/${o.currentChild._id}`,class:"dashboard-link"},{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.eW)("Pregled razvoja")]))),_:1},8,["to"]),(0,a.bF)(n,{to:`/child-overview/${o.currentChild._id}`,class:"dashboard-link"},{default:(0,a.k6)((()=>t[4]||(t[4]=[(0,a.eW)("Pregled sve Dece")]))),_:1},8,["to"])])]),(0,a.Lk)("div",y,[(0,a.bF)(n,{to:"/child-registration",class:"dashboard-link"},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.eW)("Registruj Još Jedno Dete")]))),_:1})])])):((0,a.uX)(),(0,a.CE)("div",E,[t[7]||(t[7]=(0,a.Lk)("p",null,"Nema podataka o detetu. Molimo proverite unos ili registrujte dete.",-1)),(0,a.bF)(n,{to:"/child-registration",class:"dashboard-link"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.eW)("Registruj Dete")]))),_:1})]))])}var C=i(4335),L=i(953),A={setup(){const e=l(),t=(0,L.KR)(!0),i=(0,L.KR)(null),o=(0,L.KR)(""),r=async()=>{try{let t=e.childId;if(!t)return void(o.value="Nema registrovanog deteta. Molimo registrujte dete.");const a=await C.A.get(`https://child-development-backend.fly.dev/api/${t}`,{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});i.value=a.data}catch(a){console.error("❌ Greška prilikom učitavanja deteta:",a),o.value="Greška prilikom učitavanja podataka."}finally{t.value=!1}};return(0,a.sV)((()=>{r()})),(0,a.wB)((()=>e.childId),(async e=>{e&&await r()})),{loading:t,currentChild:i,errorMessage:o}}};const j=(0,h.A)(A,[["render",I],["__scopeId","data-v-644ca71a"]]);var P=j;const w={class:"signup-container"},$={key:0,class:"error-message"},_={class:"password-container"},M=["type"],z={key:0,class:"error-message"},F={key:1,class:"error-message"},X=["disabled"],S={class:"login-link"};function N(e,t,i,r,s,n){return(0,a.uX)(),(0,a.CE)("div",w,[t[14]||(t[14]=(0,a.Lk)("h2",null,"Registrujte se",-1)),(0,a.Lk)("form",{onSubmit:t[10]||(t[10]=(0,o.D$)(((...e)=>n.registerUser&&n.registerUser(...e)),["prevent"]))},[(0,a.bo)((0,a.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.email=e),placeholder:"Email",required:"",onBlur:t[1]||(t[1]=(...e)=>n.validateEmail&&n.validateEmail(...e)),onInput:t[2]||(t[2]=(...e)=>n.validateForm&&n.validateForm(...e))},null,544),[[o.Jo,s.email]]),s.emailError?((0,a.uX)(),(0,a.CE)("div",$,(0,p.v_)(s.emailError),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",_,[(0,a.bo)((0,a.Lk)("input",{type:s.passwordVisible?"text":"password","onUpdate:modelValue":t[3]||(t[3]=e=>s.password=e),placeholder:"Lozinka",required:"",onBlur:t[4]||(t[4]=(...e)=>n.validatePassword&&n.validatePassword(...e)),onInput:t[5]||(t[5]=(...e)=>n.validateForm&&n.validateForm(...e))},null,40,M),[[o.hp,s.password]]),(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>s.passwordVisible=e)},null,512),[[o.lH,s.passwordVisible]]),t[12]||(t[12]=(0,a.eW)(" Prikaži lozinku "))]),s.passwordError?((0,a.uX)(),(0,a.CE)("div",z,(0,p.v_)(s.passwordError),1)):(0,a.Q3)("",!0)]),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>s.name=e),placeholder:"Ime",required:"",onBlur:t[8]||(t[8]=(...e)=>n.validateName&&n.validateName(...e)),onInput:t[9]||(t[9]=(...e)=>n.validateForm&&n.validateForm(...e))},null,544),[[o.Jo,s.name]]),s.nameError?((0,a.uX)(),(0,a.CE)("div",F,(0,p.v_)(s.nameError),1)):(0,a.Q3)("",!0),(0,a.Lk)("button",{type:"submit",disabled:s.hasErrors},"Registrujte se",8,X)],32),(0,a.Lk)("div",S,[(0,a.Lk)("p",null,[t[13]||(t[13]=(0,a.eW)("Već imate nalog? ")),(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>n.navigateToLogin&&n.navigateToLogin(...e))},"Ulogujte se")])])])}var T={data(){return{name:"",email:"",password:"",passwordVisible:!1,errorMessage:"",emailError:null,passwordError:null,nameError:null,hasErrors:!0}},methods:{validateEmail(){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;this.email.trim()?e.test(this.email)?this.emailError=null:(this.emailError="Unesite validan email.",this.hasErrors=!0):(this.emailError="Email je obavezan.",this.hasErrors=!0)},validatePassword(){this.password.trim()?this.password.length<6?(this.passwordError="Lozinka mora imati najmanje 6 karaktera.",this.hasErrors=!0):this.passwordError=null:(this.passwordError="Lozinka je obavezna.",this.hasErrors=!0)},validateName(){this.name.trim()?this.nameError=null:(this.nameError="Ime je obavezno.",this.hasErrors=!0)},validateForm(){this.validateEmail(),this.validatePassword(),this.validateName(),this.hasErrors=!!(this.emailError||this.passwordError||this.nameError)},async registerUser(){if(this.validateForm(),!this.hasErrors)try{await C.A.post("https://child-development-backend.fly.dev/api/users/register",{name:this.name,email:this.email,password:this.password},{headers:{"Content-Type":"application/json"}});0;const e=await C.A.post("https://child-development-backend.fly.dev/api/users/login",{email:this.email,password:this.password}),t=e.data.token;sessionStorage.setItem("token",t);const i=l();i.login(t),this.$router.push("/child-registration")}catch(e){0,e.response?(console.log("Error response data:",e.response.data),this.errorMessage=e.response.data.message||"Došlo je do greške na serveru"):e.request?this.errorMessage="Nema odgovora od servera":this.errorMessage=e.message}},navigateToLogin(){this.$router.push("/login")}}};const q=(0,h.A)(T,[["render",N],["__scopeId","data-v-1bf97c54"]]);var B=q;const W={class:"login-container"},O={key:0,class:"error-message"},U={class:"password-container"},Q=["type"],V={class:"signup-link"};function R(e,t,i,r,s,n){return(0,a.uX)(),(0,a.CE)("div",W,[t[8]||(t[8]=(0,a.Lk)("h2",null,"Prijavite se",-1)),s.errorMessage?((0,a.uX)(),(0,a.CE)("div",O,(0,p.v_)(s.errorMessage),1)):(0,a.Q3)("",!0),(0,a.Lk)("form",{onSubmit:t[3]||(t[3]=(0,o.D$)(((...e)=>n.loginUser&&n.loginUser(...e)),["prevent"]))},[(0,a.bo)((0,a.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.email=e),placeholder:"Email",required:""},null,512),[[o.Jo,s.email]]),(0,a.Lk)("div",U,[(0,a.bo)((0,a.Lk)("input",{type:s.passwordVisible?"text":"password","onUpdate:modelValue":t[1]||(t[1]=e=>s.password=e),placeholder:"Lozinka",required:""},null,8,Q),[[o.hp,s.password]]),(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>s.passwordVisible=e)},null,512),[[o.lH,s.passwordVisible]]),t[5]||(t[5]=(0,a.eW)(" Prikaži lozinku "))])]),t[6]||(t[6]=(0,a.Lk)("button",{type:"submit"},"Prijavite se",-1))],32),(0,a.Lk)("div",V,[(0,a.Lk)("p",null,[t[7]||(t[7]=(0,a.eW)("Nemate nalog? ")),(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.navigateToSignup&&n.navigateToSignup(...e))},"Registrujte se")])])])}i(8111),i(1701);var K={data(){return{email:"",password:"",passwordVisible:!1,errorMessage:""}},methods:{async loginUser(){try{const e=l(),t=await C.A.post("https://child-development-backend.fly.dev/api/users/login",{email:this.email,password:this.password}),i=t.data.token;sessionStorage.setItem("token",i),e.login(i);const o=await C.A.get("https://child-development-backend.fly.dev/api",{headers:{Authorization:`Bearer ${i}`}});if(o.data&&o.data.length>0){const t=o.data[0];console.log("✅ Logged-in user has child:",t),t&&t._id?(e.childIds=o.data.map((e=>e._id)),e.setCurrentChildId(t._id),sessionStorage.setItem("childIds",JSON.stringify(e.childIds)),this.$router.push("/dashboard")):(console.warn("⚠️ No valid child found. Redirecting to registration."),e.childIds=[],e.currentChildId=null,sessionStorage.removeItem("childIds"),sessionStorage.removeItem("childId"),this.$router.push("/child-registration"))}else console.warn("⚠️ No children found. Redirecting to registration."),e.childIds=[],e.currentChildId=null,sessionStorage.removeItem("childIds"),sessionStorage.removeItem("childId"),this.$router.push("/child-registration")}catch(e){console.error("❌ Login error:",e),this.errorMessage=e.response?.data?.message||"Pogrešan email ili lozinka."}},navigateToSignup(){this.$router.push("/")}}};const x=(0,h.A)(K,[["render",R],["__scopeId","data-v-dcae516e"]]);var J=x;const Y={class:"development-container"},G={class:"development-title"},H={key:0,class:"development-data"},Z={key:1},ee={class:"navigation-buttons"};function te(e,t,i,o,r,s){const n=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",Y,[(0,a.Lk)("h2",G,"Razvoj Deteta - Period: "+(0,p.v_)(i.startAge)+"-"+(0,p.v_)(r.endAge)+" Meseci",1),r.developmentData.length?((0,a.uX)(),(0,a.CE)("div",H,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.developmentData,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e._id,class:"development-item"},[(0,a.Lk)("p",null,[t[0]||(t[0]=(0,a.Lk)("strong",null,"Fizički razvoj:",-1)),(0,a.eW)(" "+(0,p.v_)(e.physicalDevelopment),1)]),(0,a.Lk)("p",null,[t[1]||(t[1]=(0,a.Lk)("strong",null,"Emocionalni razvoj:",-1)),(0,a.eW)(" "+(0,p.v_)(e.emotionalDevelopment),1)]),(0,a.Lk)("p",null,[t[2]||(t[2]=(0,a.Lk)("strong",null,"Intelektualni razvoj:",-1)),(0,a.eW)(" "+(0,p.v_)(e.intellectualDevelopment),1)]),(0,a.Lk)("p",null,[t[3]||(t[3]=(0,a.Lk)("strong",null,"Socijalni razvoj:",-1)),(0,a.eW)(" "+(0,p.v_)(e.socialDevelopment),1)])])))),128))])):((0,a.uX)(),(0,a.CE)("div",Z,t[4]||(t[4]=[(0,a.Lk)("p",{class:"no-data-message"},"Nema podataka za ovaj period.",-1)]))),(0,a.Lk)("div",ee,[i.startAge>0?((0,a.uX)(),(0,a.Wv)(n,{key:0,to:s.previousPeriod,class:"nav-button"},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.eW)("Prethodni period")]))),_:1},8,["to"])):(0,a.Q3)("",!0),(0,a.bF)(n,{to:s.nextPeriod,class:"nav-button"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.eW)("Sledeći period")]))),_:1},8,["to"])])])}var ie={props:["childId","startAge"],data(){return{developmentData:[],endAge:parseInt(this.startAge)+6}},computed:{nextPeriod(){return`/child-development/${this.childId}/${this.endAge}`},previousPeriod(){return`/child-development/${this.childId}/${this.startAge-6}`}},created(){this.fetchDevelopmentData()},methods:{async fetchDevelopmentData(){try{const e=await C.A.get(`https://child-development-backend.fly.dev/api/child-development/${this.childId}/${this.startAge}`);this.developmentData=e.data}catch(e){console.error("Greška pri dobijanju podataka:",e)}}}};const oe=(0,h.A)(ie,[["render",te],["__scopeId","data-v-1d5f8aa0"]]);var ae=oe;const re={class:"milestone-form-container"},se={class:"form-group"},ne={key:0,class:"error-message"},le={class:"form-group"},de={key:0,class:"error-message"},ce={class:"form-group"},he={key:0,class:"error-message"},ue={class:"form-group"},me={class:"button-group"},pe=["disabled"];function ve(e,t,i,r,s,n){return(0,a.uX)(),(0,a.CE)("div",re,[(0,a.Lk)("h2",null,(0,p.v_)(s.isEditing?"Izmeni Kljucni Momenat":"Dodaj Kljucni Momenat"),1),(0,a.Lk)("form",{onSubmit:t[8]||(t[8]=(0,o.D$)(((...e)=>n.submitForm&&n.submitForm(...e)),["prevent"])),class:"milestone-form"},[(0,a.Lk)("div",se,[t[9]||(t[9]=(0,a.Lk)("label",{for:"milestoneType"},"Tip Ključnog Momenta:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.milestone.milestoneType=e),type:"text",id:"milestoneType",required:"",placeholder:"Npr. Prvi korak, Prva reč...",onBlur:t[1]||(t[1]=(...e)=>n.validateMilestoneType&&n.validateMilestoneType(...e))},null,544),[[o.Jo,s.milestone.milestoneType]]),s.milestoneTypeError?((0,a.uX)(),(0,a.CE)("div",ne,(0,p.v_)(s.milestoneTypeError),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",le,[t[10]||(t[10]=(0,a.Lk)("label",{for:"milestoneDate"},"Datum:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.milestone.milestoneDate=e),type:"date",id:"milestoneDate",required:"",onBlur:t[3]||(t[3]=(...e)=>n.validateMilestoneDate&&n.validateMilestoneDate(...e))},null,544),[[o.Jo,s.milestone.milestoneDate]]),s.milestoneDateError?((0,a.uX)(),(0,a.CE)("div",de,(0,p.v_)(s.milestoneDateError),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",ce,[t[11]||(t[11]=(0,a.Lk)("label",{for:"progress"},"Napredak:",-1)),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.milestone.progress=e),id:"progress",required:"",placeholder:"Opišite napredak...",onBlur:t[5]||(t[5]=(...e)=>n.validateProgress&&n.validateProgress(...e))},null,544),[[o.Jo,s.milestone.progress]]),s.progressError?((0,a.uX)(),(0,a.CE)("div",he,(0,p.v_)(s.progressError),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",ue,[t[12]||(t[12]=(0,a.Lk)("label",{for:"notes"},"Napomene:",-1)),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.milestone.notes=e),id:"notes",placeholder:"Dodatne napomene..."},null,512),[[o.Jo,s.milestone.notes]])]),(0,a.Lk)("div",me,[(0,a.Lk)("button",{type:"submit",class:"submit-btn",disabled:s.hasErrors},(0,p.v_)(s.isEditing?"Sačuvaj Izmene":"Dodaj Kljucni Momenat"),9,pe),(0,a.Lk)("button",{type:"button",onClick:t[7]||(t[7]=(...e)=>n.goBack&&n.goBack(...e)),class:"cancel-btn"},"Otkaži")])],32)])}var ge={props:["childId","milestoneId"],data(){return{milestone:{milestoneType:"",milestoneDate:"",progress:"",notes:"",startAge:this.$route.query.startAge||0,endAge:this.$route.query.endAge||0,childId:this.childId},isEditing:!1,milestoneTypeError:null,milestoneDateError:null,progressError:null,hasErrors:!1}},async created(){if(this.milestoneId){this.isEditing=!0;try{const e=sessionStorage.getItem("token"),t=await C.A.get(`https://backend-solitary-wave-1128.fly.dev/api/milestones/${this.milestoneId}`,{headers:{Authorization:`Bearer ${e}`}});t.data&&(this.milestone={...t.data,milestoneDate:new Date(t.data.milestoneDate).toISOString().split("T")[0]})}catch(e){console.error("Error fetching milestone:",e)}}},methods:{validateMilestoneType(){this.milestone.milestoneType.trim()?this.milestoneTypeError=null:(this.milestoneTypeError="Tip momenta je obavezan.",this.hasErrors=!0)},validateMilestoneDate(){this.milestone.milestoneDate?this.milestoneDateError=null:(this.milestoneDateError="Datum je obavezan.",this.hasErrors=!0)},validateProgress(){this.milestone.progress.trim()?this.progressError=null:(this.progressError="Napredak je obavezan.",this.hasErrors=!0)},async submitForm(){if(this.validateMilestoneType(),this.validateMilestoneDate(),this.validateProgress(),!this.hasErrors)try{const e=sessionStorage.getItem("token"),t={Authorization:`Bearer ${e}`};this.isEditing?await C.A.put(`https://child-development-backend.fly.dev/api/milestones/${this.milestoneId}`,this.milestone,{headers:t}):await C.A.post(`https://child-development-backend.fly.dev/api/milestones/${this.childId}`,this.milestone,{headers:t}),this.$router.push(`/child-development-list/${this.childId}`)}catch(e){console.error("Error saving milestone:",e)}},formatPeriod(e,t){return`${e}-${t} meseci`},goBack(){this.$router.push(`/child-development-list/${this.childId}`)}}};const ke=(0,h.A)(ge,[["render",ve],["__scopeId","data-v-24b10382"]]);var fe=ke;const be={class:"milestone-list-container"},De={key:0,class:"milestone-list"},ye={class:"button-group"},Ee=["onClick"],Ie=["onClick"],Ce={key:1,class:"no-data-message"};function Le(e,t,i,o,r,s){const n=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",be,[t[4]||(t[4]=(0,a.Lk)("h2",null,"Pregled Ključnih Momenata",-1)),r.milestones.length?((0,a.uX)(),(0,a.CE)("div",De,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.milestones,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e._id,class:"milestone-item"},[(0,a.Lk)("h3",null,(0,p.v_)(e.milestoneType)+" - "+(0,p.v_)(s.formatDate(e.milestoneDate)),1),(0,a.Lk)("p",null,[t[0]||(t[0]=(0,a.Lk)("strong",null,"Napredak:",-1)),(0,a.eW)(" "+(0,p.v_)(e.progress),1)]),(0,a.Lk)("p",null,[t[1]||(t[1]=(0,a.Lk)("strong",null,"Napomene:",-1)),(0,a.eW)(" "+(0,p.v_)(e.notes),1)]),(0,a.Lk)("div",ye,[(0,a.Lk)("button",{onClick:t=>s.editMilestone(e._id),class:"edit-btn"},"Izmeni",8,Ee),(0,a.Lk)("button",{onClick:t=>s.confirmDelete(e._id),class:"delete-btn"},"Obriši",8,Ie)])])))),128))])):((0,a.uX)(),(0,a.CE)("div",Ce,t[2]||(t[2]=[(0,a.Lk)("p",null,"Nema podataka o Ključnim Momentima za ovo dete.",-1)]))),(0,a.bF)(n,{to:`/milestone-form/${r.childId}`,class:"add-milestone-button"},{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.eW)(" Dodaj Ključni Momenat ")]))),_:1},8,["to"])])}i(2489);var Ae={data(){return{milestones:[],childId:null}},created(){this.childId=this.$route.params.childId,this.childId?this.fetchMilestones():this.$router.push("/child-registration")},methods:{async fetchMilestones(){try{const e=sessionStorage.getItem("token"),t=await C.A.get(`https://child-development-backend.fly.dev/api/milestones/${this.childId}`,{headers:{Authorization:`Bearer ${e}`}});this.milestones=t.data}catch(e){console.error("Error fetching milestones:",e)}},formatDate(e){if(!e)return"";const t=new Date(e);return`${t.getDate()}/${t.getMonth()+1}/${t.getFullYear()}`},editMilestone(e){this.$router.push(`/milestone-form/${this.childId}/${e}`)},async deleteMilestone(e){try{const t=sessionStorage.getItem("token");await C.A.delete(`https://child-development-backend.fly.dev/api/milestones/${e}`,{headers:{Authorization:`Bearer ${t}`}});this.milestones=this.milestones.filter((t=>t._id!==e))}catch(t){console.error("Error deleting milestone:",t)}},async confirmDelete(e){window.confirm("Da li ste sigurni da želite da obrišete ovaj milestone?")&&await this.deleteMilestone(e)}}};const je=(0,h.A)(Ae,[["render",Le],["__scopeId","data-v-6ca668be"]]);var Pe=je;const we={class:"development-form"},$e={key:0},_e={key:1},Me={key:2,class:"error-message"},ze={class:"form-group"},Fe={key:0,class:"error-message"},Xe={class:"form-group"},Se={key:0,class:"error-message"},Ne={class:"form-group"},Te={key:0,class:"error-message"},qe={class:"form-group"},Be={key:0,class:"error-message"},We=["disabled"];function Oe(e,t,i,r,s,n){return(0,a.uX)(),(0,a.CE)("div",we,[t[13]||(t[13]=(0,a.Lk)("h2",null,"Unos Razvoja Deteta",-1)),n.currentPeriod?((0,a.uX)(),(0,a.CE)("h3",$e,"Trenutni period: "+(0,p.v_)(n.currentPeriod.startAge)+" - "+(0,p.v_)(n.currentPeriod.endAge)+" meseci",1)):(0,a.Q3)("",!0),n.childAgeInMonths?((0,a.uX)(),(0,a.CE)("h3",_e,"Trenutna starost deteta: "+(0,p.v_)(n.childAgeInMonths)+" meseci",1)):(0,a.Q3)("",!0),s.error?((0,a.uX)(),(0,a.CE)("div",Me,(0,p.v_)(s.error),1)):(0,a.Q3)("",!0),(0,a.Lk)("form",{onSubmit:t[8]||(t[8]=(0,o.D$)(((...e)=>n.saveDevelopment&&n.saveDevelopment(...e)),["prevent"]))},[(0,a.Lk)("div",ze,[t[9]||(t[9]=(0,a.Lk)("label",{for:"physicalDevelopment"},"Fizički razvoj:",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"physicalDevelopment","onUpdate:modelValue":t[0]||(t[0]=e=>s.formData.physicalDevelopment=e),required:"",onInput:t[1]||(t[1]=e=>n.validateInput("physicalDevelopment"))},null,544),[[o.Jo,s.formData.physicalDevelopment]]),s.physicalError?((0,a.uX)(),(0,a.CE)("div",Fe,(0,p.v_)(s.physicalError),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Xe,[t[10]||(t[10]=(0,a.Lk)("label",{for:"emotionalDevelopment"},"Emocionalni razvoj:",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"emotionalDevelopment","onUpdate:modelValue":t[2]||(t[2]=e=>s.formData.emotionalDevelopment=e),required:"",onInput:t[3]||(t[3]=e=>n.validateInput("emotionalDevelopment"))},null,544),[[o.Jo,s.formData.emotionalDevelopment]]),s.emotionalError?((0,a.uX)(),(0,a.CE)("div",Se,(0,p.v_)(s.emotionalError),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Ne,[t[11]||(t[11]=(0,a.Lk)("label",{for:"intellectualDevelopment"},"Intelektualni razvoj:",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"intellectualDevelopment","onUpdate:modelValue":t[4]||(t[4]=e=>s.formData.intellectualDevelopment=e),required:"",onInput:t[5]||(t[5]=e=>n.validateInput("intellectualDevelopment"))},null,544),[[o.Jo,s.formData.intellectualDevelopment]]),s.intellectualError?((0,a.uX)(),(0,a.CE)("div",Te,(0,p.v_)(s.intellectualError),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",qe,[t[12]||(t[12]=(0,a.Lk)("label",{for:"socialDevelopment"},"Socijalni razvoj:",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"socialDevelopment","onUpdate:modelValue":t[6]||(t[6]=e=>s.formData.socialDevelopment=e),required:"",onInput:t[7]||(t[7]=e=>n.validateInput("socialDevelopment"))},null,544),[[o.Jo,s.formData.socialDevelopment]]),s.socialError?((0,a.uX)(),(0,a.CE)("div",Be,(0,p.v_)(s.socialError),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{type:"submit",disabled:s.loading||s.hasErrors},(0,p.v_)(s.loading?"Čuvanje...":"Sačuvaj"),9,We)],32)])}i(116);var Ue={data(){return{childName:null,childAge:null,developmentData:[],milestoneData:[],availablePeriods:[],selectedPeriod:null,childBirthDate:null,error:null,loading:!1,hasErrors:!1,formData:{physicalDevelopment:"",emotionalDevelopment:"",intellectualDevelopment:"",socialDevelopment:""},physicalError:null,emotionalError:null,intellectualError:null,socialError:null}},computed:{currentPeriod(){return this.selectedPeriod?this.developmentData.find((e=>e.startAge===this.selectedPeriod.start&&e.endAge===this.selectedPeriod.end)):null},childAgeInMonths(){return this.childAge}},methods:{validateInput(e){this.formData[e].trim()?(this[`${e}Error`]=null,this.hasErrors=!1):(this[`${e}Error`]=`${e} is required`,this.hasErrors=!0)},async saveDevelopment(){const{childId:e}=this.$route.params,t={startAge:this.selectedPeriod.start,endAge:this.selectedPeriod.end,physicalDevelopment:this.formData.physicalDevelopment,emotionalDevelopment:this.formData.emotionalDevelopment,intellectualDevelopment:this.formData.intellectualDevelopment,socialDevelopment:this.formData.socialDevelopment};try{const i=l(),o=i.token;0,await C.A.post(`https://child-development-backend.fly.dev/api/child-development/${e}`,t,{headers:{Authorization:`Bearer ${o}`}}),this.$router.push({path:`/child-development-list/${e}`,query:{periodStart:this.selectedPeriod.start,periodEnd:this.selectedPeriod.end}})}catch(i){console.error("❌ Error saving development:",i),this.error="There was an error saving the development data."}},async fetchChildData(e){try{const t=l(),i=t.token;0;const o=await C.A.get(`https://child-development-backend.fly.dev/api/${e}`,{headers:{Authorization:`Bearer ${i}`}});o.data&&(this.childName=o.data.name,this.childAge=this.calculateAgeInMonths(o.data.birthDate),this.childBirthDate=o.data.birthDate,this.generateAvailablePeriods())}catch(t){console.error("❌ Error fetching child data:",t)}},async fetchDevelopmentData(e){try{const t=l(),i=t.token;0;const o=await C.A.get(`https://child-development-backend.fly.dev/api/child-development/${e}`,{headers:{Authorization:`Bearer ${i}`}});this.developmentData=o.data||[],this.selectedPeriod=this.availablePeriods.find((e=>this.childAge>=e.start&&this.childAge<e.end))}catch(t){console.error("❌ Error fetching development data:",t)}},async fetchMilestones(e){try{const t=l(),i=t.token;0;const o=await C.A.get(`https://child-development-backend.fly.dev/api/milestones/${e}`,{headers:{Authorization:`Bearer ${i}`}});this.milestoneData=o.data||[]}catch(t){console.error("❌ Error fetching milestones:",t)}},getMilestonesForPeriod(e){if(!this.childBirthDate)return console.warn("⚠️ Child birth date is missing, cannot filter milestones."),[];const t=new Date(this.childBirthDate),i=new Date(t);i.setMonth(i.getMonth()+e.start);const o=new Date(t);o.setMonth(o.getMonth()+e.end);const a=this.milestoneData.filter((e=>{const t=new Date(e.milestoneDate);return t>=i&&t<o}));return a},calculateAgeInMonths(e){if(!e)return 0;const t=new Date(e),i=new Date;return 12*(i.getFullYear()-t.getFullYear())+(i.getMonth()-t.getMonth())},generateAvailablePeriods(){if(null!==this.childAge){this.availablePeriods=[];for(let e=0;e<=72;e+=6)this.availablePeriods.push({start:e,end:e+6})}},formatPeriod(e,t){return`${e}-${t} meseci`}},async created(){try{const e=this.$route.params.childId;e&&(await this.fetchChildData(e),await this.fetchDevelopmentData(e))}catch(e){console.error("❌ Error in created():",e)}}};const Qe=(0,h.A)(Ue,[["render",Oe],["__scopeId","data-v-94362100"]]);var Ve=Qe;const Re={class:"development-container"},Ke={class:"child-info"},xe={class:"period-selector"},Je={class:"periods-list"},Ye=["onClick","disabled"],Ge={key:0},He={key:1},Ze={key:2},et={key:3},tt={key:0,class:"period-data"},it={key:0,class:"development-section"},ot={class:"development-details"},at={class:"development-item"},rt={class:"development-item"},st={class:"development-item"},nt={class:"development-item"},lt={class:"button-group"},dt={key:1},ct={key:2,class:"milestones-section"},ht={class:"milestone-list"},ut={class:"button-group"},mt=["onClick"],pt=["onClick"],vt={key:3,class:"no-records"},gt={key:0};function kt(e,t,i,o,r,s){return(0,a.uX)(),(0,a.CE)("div",Re,[(0,a.Lk)("h2",null,"Praćenje Razvoja za dete "+(0,p.v_)(r.childName||"Nepoznato dete"),1),(0,a.Lk)("div",Ke,[(0,a.Lk)("h3",null,(0,p.v_)(r.childName),1),(0,a.Lk)("p",null,[t[5]||(t[5]=(0,a.Lk)("strong",null,"Starost:",-1)),(0,a.eW)(" "+(0,p.v_)(r.childAge?r.childAge+" meseci":"Nepoznata starost"),1)])]),(0,a.Lk)("div",xe,[t[6]||(t[6]=(0,a.Lk)("h3",null,"Izaberite period:",-1)),(0,a.Lk)("div",Je,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.availablePeriods,(e=>((0,a.uX)(),(0,a.CE)("button",{key:`${e.start}-${e.end}`,class:(0,p.C4)(s.getPeriodClass(e)),onClick:t=>s.selectPeriod(e),disabled:s.isFuturePeriod(e)},[(0,a.eW)((0,p.v_)(s.formatPeriod(e.start,e.end))+" ",1),s.isFilledPeriod(e)?((0,a.uX)(),(0,a.CE)("span",Ge,"✔ Ispunjeno")):s.isCurrentPeriod(e)?((0,a.uX)(),(0,a.CE)("span",He,"🟢 Trenutni period")):s.isFuturePeriod(e)?((0,a.uX)(),(0,a.CE)("span",Ze,"🚫 Nedostupan")):((0,a.uX)(),(0,a.CE)("span",et,"❌ Neispunjeno"))],10,Ye)))),128))])]),r.selectedPeriod?((0,a.uX)(),(0,a.CE)("div",tt,[(0,a.Lk)("h3",null,"Razvoj za period: "+(0,p.v_)(s.formatPeriod(r.selectedPeriod.start,r.selectedPeriod.end)),1),s.currentPeriodDevelopment?((0,a.uX)(),(0,a.CE)("div",it,[t[11]||(t[11]=(0,a.Lk)("h4",null,"Razvoj deteta",-1)),(0,a.Lk)("div",ot,[(0,a.Lk)("div",at,[t[7]||(t[7]=(0,a.Lk)("h5",null,"Fizički razvoj",-1)),(0,a.Lk)("p",null,(0,p.v_)(s.currentPeriodDevelopment.physicalDevelopment||"Nema podataka"),1)]),(0,a.Lk)("div",rt,[t[8]||(t[8]=(0,a.Lk)("h5",null,"Emocionalni razvoj",-1)),(0,a.Lk)("p",null,(0,p.v_)(s.currentPeriodDevelopment.emotionalDevelopment||"Nema podataka"),1)]),(0,a.Lk)("div",st,[t[9]||(t[9]=(0,a.Lk)("h5",null,"Intelektualni razvoj",-1)),(0,a.Lk)("p",null,(0,p.v_)(s.currentPeriodDevelopment.intellectualDevelopment||"Nema podataka"),1)]),(0,a.Lk)("div",nt,[t[10]||(t[10]=(0,a.Lk)("h5",null,"Socijalni razvoj",-1)),(0,a.Lk)("p",null,(0,p.v_)(s.currentPeriodDevelopment.socialDevelopment||"Nema podataka"),1)]),(0,a.Lk)("div",lt,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>s.editDevelopment(s.currentPeriodDevelopment)),class:"edit-btn"},"Izmeni"),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>s.confirmDeleteDevelopment(s.currentPeriodDevelopment._id)),class:"delete-btn"},"Obriši")])])])):((0,a.uX)(),(0,a.CE)("div",dt,[s.isFilledPeriod(r.selectedPeriod)?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=e=>s.navigateToDevelopmentForm(r.selectedPeriod)),class:"add-development-btn"},"Dodaj Razvoj"))])),s.currentPeriodMilestones.length?((0,a.uX)(),(0,a.CE)("div",ct,[t[14]||(t[14]=(0,a.Lk)("h4",null,"Ključni momenti za ovaj period",-1)),(0,a.Lk)("div",ht,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.currentPeriodMilestones,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e._id,class:"milestone-item"},[(0,a.Lk)("h3",null,(0,p.v_)(e.milestoneType)+" - "+(0,p.v_)(s.formatDate(e.milestoneDate)),1),(0,a.Lk)("p",null,[t[12]||(t[12]=(0,a.Lk)("strong",null,"Napredak:",-1)),(0,a.eW)(" "+(0,p.v_)(e.progress),1)]),(0,a.Lk)("p",null,[t[13]||(t[13]=(0,a.Lk)("strong",null,"Napomene:",-1)),(0,a.eW)(" "+(0,p.v_)(e.notes),1)]),(0,a.Lk)("div",ut,[(0,a.Lk)("button",{onClick:t=>s.editMilestone(e),class:"edit-btn"},"Izmeni",8,mt),(0,a.Lk)("button",{onClick:t=>s.confirmDeleteMilestone(e._id),class:"delete-btn"},"Obriši",8,pt)])])))),128))])])):((0,a.uX)(),(0,a.CE)("div",vt,[s.isFilledPeriod(r.selectedPeriod)?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("p",gt,"Nema unetih podataka za ovaj period.")),s.isFilledPeriod(r.selectedPeriod)?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[3]||(t[3]=e=>s.navigateToDevelopmentForm(r.selectedPeriod)),class:"add-development-btn"},"Dodaj Razvoj")),s.currentPeriodMilestones.length?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[4]||(t[4]=(...e)=>s.navigateToMilestoneForm&&s.navigateToMilestoneForm(...e)),class:"add-milestone-btn"},"Dodaj Ključni Momenat"))]))])):(0,a.Q3)("",!0)])}i(3579);var ft={data(){return{childName:null,childAge:null,developmentData:[],milestoneData:[],availablePeriods:[],selectedPeriod:null,childBirthDate:null}},computed:{currentPeriodDevelopment(){return this.selectedPeriod?this.developmentData.find((e=>e.startAge===this.selectedPeriod.start&&e.endAge===this.selectedPeriod.end)):null},currentPeriodMilestones(){if(!this.selectedPeriod)return[];const e=this.getMilestonesForPeriod(this.selectedPeriod);return e}},methods:{async fetchChildData(e){try{const t=l(),i=t.token;0;const o=await C.A.get(`https://child-development-backend.fly.dev/api/${e}`,{headers:{Authorization:`Bearer ${i}`}});o.data&&(this.childName=o.data.name,this.childAge=this.calculateAgeInMonths(o.data.birthDate),this.childBirthDate=o.data.birthDate,this.generateAvailablePeriods())}catch(t){console.error("❌ Error fetching child data:",t)}},async fetchDevelopmentData(e){try{const t=l(),i=t.token;0;const o=await C.A.get(`https://child-development-backend.fly.dev/api/child-development/${e}`,{headers:{Authorization:`Bearer ${i}`}});this.developmentData=o.data||[]}catch(t){console.error("❌ Error fetching development data:",t)}},async fetchMilestones(e){try{const t=l(),i=t.token;0;const o=await C.A.get(`https://child-development-backend.fly.dev/api/milestones/${e}`,{headers:{Authorization:`Bearer ${i}`}});this.milestoneData=o.data||[]}catch(t){console.error("❌ Error fetching milestones:",t)}},getMilestonesForPeriod(e){if(!this.childBirthDate)return console.warn("⚠️ Child birth date is missing, cannot filter milestones."),[];const t=new Date(this.childBirthDate),i=new Date(t);i.setMonth(i.getMonth()+e.start);const o=new Date(t);o.setMonth(o.getMonth()+e.end);const a=this.milestoneData.filter((e=>{const t=new Date(e.milestoneDate);return t>=i&&t<o}));return a},calculateStartDate(e){const t=new Date(this.childBirthDate);return t.setMonth(t.getMonth()+e),t},calculateEndDate(e){const t=new Date(this.childBirthDate);return t.setMonth(t.getMonth()+e),t},calculateAgeInMonths(e){if(!e)return 0;const t=new Date(e),i=new Date;return 12*(i.getFullYear()-t.getFullYear())+(i.getMonth()-t.getMonth())},generateAvailablePeriods(){if(null!==this.childAge){this.availablePeriods=[];for(let e=0;e<=72;e+=6)this.availablePeriods.push({start:e,end:e+6})}},async selectPeriod(e){this.selectedPeriod=e,await this.fetchMilestones(this.$route.params.childId),this.$forceUpdate()},formatPeriod(e,t){return`${e}-${t} meseci`},formatDate(e){return new Date(e).toLocaleDateString("sr-RS")},getPeriodClass(e){return this.isCurrentPeriod(e)?"period-button current":this.isFilledPeriod(e)?"period-button filled":this.isFuturePeriod(e)?"period-button future":"period-button past"},isCurrentPeriod(e){return this.childAge>=e.start&&this.childAge<e.end},isFilledPeriod(e){return this.developmentData.some((t=>t.startAge===e.start&&t.endAge===e.end))},isFuturePeriod(e){return this.childAge<e.start},navigateToDevelopmentForm(e){this.$router.push({path:`/child-development-form/${this.$route.params.childId}`,query:{startAge:e.start,endAge:e.end}})},navigateToMilestoneForm(){this.$router.push({path:`/milestone-form/${this.$route.params.childId}`})},async confirmDeleteDevelopment(e){window.confirm("Da li ste sigurni da želite da obrišete ove podatke o razvoju?")&&await this.deleteDevelopment(e)},async deleteDevelopment(e){try{const t=l(),i=t.token,o=this.$route.params.childId;await C.A.delete(`https://child-development-backend.fly.dev/api/child-development/${o}/${e}`,{headers:{Authorization:`Bearer ${i}`}}),await this.fetchDevelopmentData(o),await this.fetchMilestones(o)}catch(t){console.error("❌ Error deleting development data:",t)}},editDevelopment(e){e?this.$router.push({path:`/child-development-form/${this.$route.params.childId}`,query:{startAge:e.startAge,endAge:e.endAge}}):console.warn("⚠️ No development data available to edit.")},editMilestone(e){e?this.$router.push({path:`/milestone-form/${this.$route.params.childId}`,query:{milestoneId:e._id}}):console.warn("⚠️ No milestone data available to edit.")},async confirmDeleteMilestone(e){window.confirm("Da li ste sigurni da želite da obrišete ovaj ključni trenutak?")&&await this.deleteMilestone(e)},async deleteMilestone(e){try{const t=l(),i=t.token,o=this.$route.params.childId;await C.A.delete(`https://child-development-backend.fly.dev/api/milestones/${e}`,{headers:{Authorization:`Bearer ${i}`}}),await this.fetchMilestones(o),this.$forceUpdate()}catch(t){console.error("❌ Error deleting milestone:",t)}}},async created(){try{const e=this.$route.params.childId;e&&(await this.fetchChildData(e),await this.fetchDevelopmentData(e),await this.fetchMilestones(e))}catch(e){console.error("❌ Error in created():",e)}}};const bt=(0,h.A)(ft,[["render",kt],["__scopeId","data-v-4b3329d7"]]);var Dt=bt;const yt={class:"development-container"},Et={class:"period-selector"},It={class:"periods-list"},Ct=["onClick","disabled"];function Lt(e,t,i,o,r,s){return(0,a.uX)(),(0,a.CE)("div",yt,[(0,a.Lk)("h2",null,"Praćenje Razvoja za "+(0,p.v_)(r.childName||"Nepoznato dete"),1),(0,a.Lk)("div",Et,[t[0]||(t[0]=(0,a.Lk)("h3",null,"Izaberite period:",-1)),(0,a.Lk)("div",It,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.availablePeriods,(e=>((0,a.uX)(),(0,a.CE)("button",{key:`${e.start}-${e.end}`,class:(0,p.C4)(s.getPeriodClass(e)),onClick:t=>s.selectPeriod(e),disabled:s.isFuturePeriod(e)},(0,p.v_)(s.formatPeriod(e.start,e.end)),11,Ct)))),128))])])])}var At={emits:["period-selected"],data(){return{childName:null,childAge:null,availablePeriods:[]}},methods:{async fetchChildData(e){try{const t=sessionStorage.getItem("token"),i=await C.A.get(`https://child-development-backend.fly.dev/api/${e}`,{headers:{Authorization:`Bearer ${t}`}});this.childName=i.data.name,this.childAge=this.calculateAgeInMonths(i.data.birthDate),this.generateAvailablePeriods()}catch(t){console.error("❌ Greška pri dobijanju podataka o detetu:",t)}},calculateAgeInMonths(e){const t=new Date(e),i=new Date;return 12*(i.getFullYear()-t.getFullYear())+(i.getMonth()-t.getMonth())},generateAvailablePeriods(){if(null!==this.childAge){this.availablePeriods=[];for(let e=0;e<=72;e+=6)this.availablePeriods.push({start:e,end:e+6})}},selectPeriod(e){this.$emit("period-selected",e)},formatPeriod(e,t){return`${e}-${t} meseci`},getPeriodClass(e){return this.isCurrentPeriod(e)?"period-button current":this.isFilledPeriod(e)?"period-button filled":this.isFuturePeriod(e)?"period-button future":"period-button past"},isCurrentPeriod(e){return this.childAge>=e.start&&this.childAge<e.end},isFilledPeriod(e){return this.childAge>=e.end},isFuturePeriod(e){return this.childAge<e.start}},async created(){const e=this.$route.params.childId;e&&await this.fetchChildData(e)}};const jt=(0,h.A)(At,[["render",Lt]]);var Pt=jt;const wt={class:"registration-container"},$t={key:0,class:"error-message"},_t={class:"dashboard-link"};function Mt(e,t,i,r,s,n){const l=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",wt,[t[5]||(t[5]=(0,a.Lk)("h2",null,"Registracija Deteta",-1)),e.errorMessage?((0,a.uX)(),(0,a.CE)("div",$t,(0,p.v_)(e.errorMessage),1)):(0,a.Q3)("",!0),(0,a.Lk)("form",{onSubmit:t[2]||(t[2]=(0,o.D$)(((...t)=>e.registerChild&&e.registerChild(...t)),["prevent"]))},[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.name=t),placeholder:"Ime deteta",required:""},null,512),[[o.Jo,e.name]]),(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=t=>e.birthdate=t),required:""},null,512),[[o.Jo,e.birthdate]]),t[3]||(t[3]=(0,a.Lk)("button",{type:"submit"},"Registruj Dete",-1))],32),(0,a.Lk)("div",_t,[(0,a.bF)(l,{to:"/dashboard"},{default:(0,a.k6)((()=>t[4]||(t[4]=[(0,a.eW)("Idi na Dashboard")]))),_:1})])])}var zt={props:["childId","milestoneId"],data(){return{milestone:{milestoneType:"",milestoneDate:"",progress:"",notes:"",startAge:this.$route.query.startAge||0,endAge:this.$route.query.endAge||0,childId:this.childId},isEditing:!1,milestoneTypeError:null,milestoneDateError:null,progressError:null,hasErrors:!1}},async created(){if(this.milestoneId){this.isEditing=!0;try{const e=sessionStorage.getItem("token"),t=await C.A.get(`https://child-development-backend.fly.dev/api/milestones/${this.milestoneId}`,{headers:{Authorization:`Bearer ${e}`}});t.data&&(this.milestone={...t.data,milestoneDate:new Date(t.data.milestoneDate).toISOString().split("T")[0]})}catch(e){console.error("Error fetching milestone:",e)}}},methods:{validateMilestoneType(){this.milestone.milestoneType.trim()?this.milestoneTypeError=null:(this.milestoneTypeError="Tip momenta je obavezan.",this.hasErrors=!0)},validateMilestoneDate(){this.milestone.milestoneDate?this.milestoneDateError=null:(this.milestoneDateError="Datum je obavezan.",this.hasErrors=!0)},validateProgress(){this.milestone.progress.trim()?this.progressError=null:(this.progressError="Napredak je obavezan.",this.hasErrors=!0)},async submitForm(){if(this.validateMilestoneType(),this.validateMilestoneDate(),this.validateProgress(),!this.hasErrors)try{const e=sessionStorage.getItem("token"),t={Authorization:`Bearer ${e}`};this.isEditing?await C.A.put(`https://child-development-backend.fly.dev/api/milestones/${this.milestoneId}`,this.milestone,{headers:t}):await C.A.post(`https://child-development-backend.fly.dev/api/milestones/${this.childId}`,this.milestone,{headers:t}),this.$router.push(`/child-development-list/${this.childId}`)}catch(e){console.error("Error saving milestone:",e)}},formatPeriod(e,t){return`${e}-${t} meseci`},goBack(){this.$router.push(`/child-development-list/${this.childId}`)}}};const Ft=(0,h.A)(zt,[["render",Mt],["__scopeId","data-v-78b3c566"]]);var Xt=Ft;const St={class:"overview-container"},Nt={key:0},Tt={key:1,class:"error-message"},qt={key:2},Bt={key:0,class:"select-container"},Wt=["value"],Ot={key:0,class:"error-message"},Ut={key:1,class:"development-table"},Qt={key:2,class:"error-message"},Vt={key:3,class:"milestone-table"},Rt={key:4,class:"error-message"},Kt=["disabled"];function xt(e,t,i,r,s,n){return(0,a.uX)(),(0,a.CE)("div",St,[(0,a.Lk)("h2",null,"Pregled razvoja deteta - "+(0,p.v_)(s.child.name||"Nepoznato dete"),1),s.loading?((0,a.uX)(),(0,a.CE)("div",Nt,"Učitavanje podataka...")):s.errorMessage?((0,a.uX)(),(0,a.CE)("div",Tt,(0,p.v_)(s.errorMessage),1)):((0,a.uX)(),(0,a.CE)("div",qt,[s.children.length>0?((0,a.uX)(),(0,a.CE)("div",Bt,[t[3]||(t[3]=(0,a.Lk)("label",{for:"child-select"},"Izaberite dete:",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.selectedChildId=e),onChange:t[1]||(t[1]=(...e)=>n.onChildSelect&&n.onChildSelect(...e))},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.children,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e._id,value:e._id},(0,p.v_)(e.name),9,Wt)))),128))],544),[[o.u1,s.selectedChildId]]),s.selectedChildId&&!s.child?((0,a.uX)(),(0,a.CE)("div",Ot,"Izaberite dete kako biste videli podatke.")):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),t[6]||(t[6]=(0,a.Lk)("h3",null,"Razvoj deteta",-1)),s.developmentData.length>0?((0,a.uX)(),(0,a.CE)("table",Ut,[t[4]||(t[4]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Period"),(0,a.Lk)("th",null,"Fizički razvoj"),(0,a.Lk)("th",null,"Emocionalni razvoj"),(0,a.Lk)("th",null,"Intelektualni razvoj"),(0,a.Lk)("th",null,"Socijalni razvoj")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.developmentData,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.startAge},[(0,a.Lk)("td",null,(0,p.v_)(e.startAge)+" - "+(0,p.v_)(e.endAge)+" meseci",1),(0,a.Lk)("td",null,(0,p.v_)(e.physicalDevelopment||"-"),1),(0,a.Lk)("td",null,(0,p.v_)(e.emotionalDevelopment||"-"),1),(0,a.Lk)("td",null,(0,p.v_)(e.intellectualDevelopment||"-"),1),(0,a.Lk)("td",null,(0,p.v_)(e.socialDevelopment||"-"),1)])))),128))])])):((0,a.uX)(),(0,a.CE)("div",Qt,"Nema podataka o razvoju za ovo dete.")),t[7]||(t[7]=(0,a.Lk)("h3",null,"Ključni momenti",-1)),s.milestoneData.length>0?((0,a.uX)(),(0,a.CE)("table",Vt,[t[5]||(t[5]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Tip momenta"),(0,a.Lk)("th",null,"Datum"),(0,a.Lk)("th",null,"Napredak"),(0,a.Lk)("th",null,"Napomene")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.milestoneData,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e._id},[(0,a.Lk)("td",null,(0,p.v_)(e.milestoneType),1),(0,a.Lk)("td",null,(0,p.v_)(n.formatDate(e.milestoneDate)),1),(0,a.Lk)("td",null,(0,p.v_)(e.progress||"-"),1),(0,a.Lk)("td",null,(0,p.v_)(e.notes||"-"),1)])))),128))])])):((0,a.uX)(),(0,a.CE)("div",Rt,"Nema ključnih momenata za ovo dete.")),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.downloadPDF&&n.downloadPDF(...e)),class:"pdf-button",disabled:!s.developmentData.length||!s.milestoneData.length},"Preuzmi PDF",8,Kt)]))])}var Jt=i(4323),Yt=i(5708),Gt={data(){return{children:[],selectedChildId:"",child:{},developmentData:[],milestoneData:[],loading:!0,errorMessage:""}},async created(){await this.fetchChildren()},methods:{formatDate(e){return new Date(e).toLocaleDateString("sr-RS")},async fetchChildren(){try{const e=sessionStorage.getItem("token"),t=await C.A.get("https://child-development-backend.fly.dev/api/",{headers:{Authorization:`Bearer ${e}`}});this.children=t.data;const i=l();i.childId?this.selectedChildId=i.childId:this.children.length>0&&(this.selectedChildId=this.children[0]._id,i.setCurrentChildId(this.selectedChildId)),await this.fetchChildData(this.selectedChildId),await this.fetchDevelopmentData(this.selectedChildId),await this.fetchMilestones(this.selectedChildId)}catch(e){console.error("❌ Greška pri učitavanju dece:",e),this.errorMessage="Nije moguće učitati listu dece."}finally{this.loading=!1}},async fetchChildData(e){try{const t=sessionStorage.getItem("token"),i=await C.A.get(`https://child-development-backend.fly.dev/api/${e}`,{headers:{Authorization:`Bearer ${t}`}});if(!i.data||0===Object.keys(i.data).length)return void(this.errorMessage="Podaci o detetu nisu pronađeni.");this.child=i.data}catch(t){console.error("❌ Greška pri dobijanju podataka o detetu:",t),this.errorMessage="Nije moguće učitati podatke o detetu."}},async fetchDevelopmentData(e){try{const t=sessionStorage.getItem("token"),i=await C.A.get(`https://child-development-backend.fly.dev/api/child-development/${e}`,{headers:{Authorization:`Bearer ${t}`}});this.developmentData=i.data||[]}catch(t){console.error("❌ Greška pri dobijanju podataka o razvoju:",t),this.errorMessage="Nije moguće učitati razvojne podatke."}},async fetchMilestones(e){try{const t=sessionStorage.getItem("token"),i=await C.A.get(`https://child-development-backend.fly.dev/api/milestones/${e}`,{headers:{Authorization:`Bearer ${t}`}});this.milestoneData=i.data||[]}catch(t){console.error("❌ Greška pri dobijanju ključnih momenata:",t)}},async onChildSelect(){const e=l();e.setCurrentChildId(this.selectedChildId),await this.fetchChildData(this.selectedChildId),await this.fetchDevelopmentData(this.selectedChildId),await this.fetchMilestones(this.selectedChildId)},downloadPDF(){const e=new Jt.uE;e.setFont("FreeSerif"),e.text(`Razvoj deteta: ${this.child.name}`,10,10);const t=[["Period","Fizicki","Emocionalni","Intelektualni","Socijalni"],...this.developmentData.map((e=>[`${e.startAge}-${e.endAge} meseci`,e.physicalDevelopment||"-",e.emotionalDevelopment||"-",e.intellectualDevelopment||"-",e.socialDevelopment||"-"]))],i=[["Tip momenta","Datum","Napredak","Napomene"],...this.milestoneData.map((e=>[e.milestoneType,this.formatDate(e.milestoneDate),e.progress||"-",e.notes||"-"]))];(0,Yt.Ay)(e,{head:[t[0]],body:t.slice(1),startY:20}),(0,Yt.Ay)(e,{head:[i[0]],body:i.slice(1),startY:e.lastAutoTable.finalY+10}),e.save(`Razvoj_${this.child.name}.pdf`)}}};const Ht=(0,h.A)(Gt,[["render",xt],["__scopeId","data-v-fde80e58"]]);var Zt=Ht;const ei=[{path:"/",component:B,name:"signup",meta:{requiresAuth:!1,guestOnly:!0}},{path:"/login",component:J,name:"login",meta:{requiresAuth:!1,guestOnly:!0}},{path:"/dashboard",component:P,name:"dashboard",meta:{requiresAuth:!0}},{path:"/child-registration",component:Xt,name:"child-registration",meta:{requiresAuth:!0}},{path:"/milestone-form/:childId/:milestoneId?",component:fe,name:"milestone-form",meta:{requiresAuth:!0,requiresChild:!0},props:!0},{path:"/milestone-list/:childId",component:Pe,name:"milestone-list",meta:{requiresAuth:!0,requiresChild:!0},props:!0},{path:"/child-development-list/:childId",component:Dt,name:"ChildDevelopmentList",meta:{requiresAuth:!0,requiresChild:!0},props:!0},{path:"/child-development-page/:childId",component:ae,name:"child-development-page",meta:{requiresAuth:!0,requiresChild:!0},props:!0},{path:"/period",component:Pt,name:"period",meta:{requiresAuth:!0,requiresChild:!0},props:!0},{path:"/child-overview/:childId",component:Zt,name:"child-overview",meta:{requiresAuth:!0,requiresChild:!0},props:!0},{path:"/add-development/:childId",name:"AddDevelopmentData",component:Ve},{path:"/add-milestone/:childId",name:"AddMilestone",component:fe},{path:"/child-development-form/:childId",name:"ChildDevelopmentForm",component:Ve},{path:"/child-development/:childId",name:"child-development",component:Ve,props:!0,meta:{requiresAuth:!0}},{path:"/child-development-list/:childId",name:"ChildDevelopmentList",component:Dt}],ti=(0,d.aE)({history:(0,d.LA)(),routes:ei});ti.beforeEach(((e,t,i)=>{const o=l();!e.meta.requiresAuth||o.isAuthenticated?e.meta.guestOnly&&o.isAuthenticated?i("/dashboard"):!e.meta.requiresChild||o.hasChild?i():i("/child-registration"):i("/login")}));var ii=ti;const oi=(0,o.Ef)(m);oi.use((0,n.Ey)()),oi.use(ii),oi.mount("#app")}},t={};function i(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,i),r.exports}i.m=e,function(){var e=[];i.O=function(t,o,a,r){if(!o){var s=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],r=e[c][2];for(var n=!0,l=0;l<o.length;l++)(!1&r||s>=r)&&Object.keys(i.O).every((function(e){return i.O[e](o[l])}))?o.splice(l--,1):(n=!1,r<s&&(s=r));if(n){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,a,r]}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};i.t=function(o,a){if(1&a&&(o=this(o)),8&a)return o;if("object"===typeof o&&o){if(4&a&&o.__esModule)return o;if(16&a&&"function"===typeof o.then)return o}var r=Object.create(null);i.r(r);var s={};e=e||[null,t({}),t([]),t(t)];for(var n=2&a&&o;"object"==typeof n&&!~e.indexOf(n);n=t(n))Object.getOwnPropertyNames(n).forEach((function(e){s[e]=function(){return o[e]}}));return s["default"]=function(){return o},i.d(r,s),r}}(),function(){i.d=function(e,t){for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){i.f={},i.e=function(e){return Promise.all(Object.keys(i.f).reduce((function(t,o){return i.f[o](e,t),t}),[]))}}(),function(){i.u=function(e){return"js/"+e+"."+{354:"33af619a",418:"1c7b5c0d",668:"3dfcdd11"}[e]+".js"}}(),function(){i.miniCssF=function(e){}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="temeljna-knjizica:";i.l=function(o,a,r,s){if(e[o])e[o].push(a);else{var n,l;if(void 0!==r)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var h=d[c];if(h.getAttribute("src")==o||h.getAttribute("data-webpack")==t+r){n=h;break}}n||(l=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,i.nc&&n.setAttribute("nonce",i.nc),n.setAttribute("data-webpack",t+r),n.src=o),e[o]=[a];var u=function(t,i){n.onerror=n.onload=null,clearTimeout(m);var a=e[o];if(delete e[o],n.parentNode&&n.parentNode.removeChild(n),a&&a.forEach((function(e){return e(i)})),t)return t(i)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),l&&document.head.appendChild(n)}}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.p="/"}(),function(){var e={524:0};i.f.j=function(t,o){var a=i.o(e,t)?e[t]:void 0;if(0!==a)if(a)o.push(a[2]);else{var r=new Promise((function(i,o){a=e[t]=[i,o]}));o.push(a[2]=r);var s=i.p+i.u(t),n=new Error,l=function(o){if(i.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var r=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;n.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",n.name="ChunkLoadError",n.type=r,n.request=s,a[1](n)}};i.l(s,l,"chunk-"+t,t)}},i.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,s=o[0],n=o[1],l=o[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(a in n)i.o(n,a)&&(i.m[a]=n[a]);if(l)var c=l(i)}for(t&&t(o);d<s.length;d++)r=s[d],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(c)},o=self["webpackChunktemeljna_knjizica"]=self["webpackChunktemeljna_knjizica"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=i.O(void 0,[504],(function(){return i(1045)}));o=i.O(o)})();
//# sourceMappingURL=app.a488222e.js.map