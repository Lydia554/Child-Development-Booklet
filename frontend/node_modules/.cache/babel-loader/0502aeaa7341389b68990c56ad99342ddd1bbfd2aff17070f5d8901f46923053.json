{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createVNode as _createVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_router_view = _resolveComponent(\"router-view\");\n  return _openBlock(), _createElementBlock(\"div\", null, [$setup.showNavigation ? (_openBlock(), _createElementBlock(\"nav\", _hoisted_1, [_createCommentVNode(\" Dashboard link when authenticated \"), $setup.authStore.isAuthenticated ? (_openBlock(), _createBlock(_component_router_link, {\n    key: 0,\n    to: \"/dashboard\"\n  }, {\n    default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\"Dashboard\")])),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Child registration only if no child \"), $setup.authStore.isAuthenticated && !$setup.hasChild ? (_openBlock(), _createBlock(_component_router_link, {\n    key: 1,\n    to: \"/child-registration\"\n  }, {\n    default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"Registracija deteta\")])),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Other links only if has child and not on dashboard \"), $setup.authStore.isAuthenticated && $setup.hasChild && !$setup.isDashboard ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 2\n  }, [_ctx.currentChildId ? (_openBlock(), _createBlock(_component_router_link, {\n    key: 0,\n    to: {\n      name: 'MilestoneForm',\n      params: {\n        childId: _ctx.currentChildId\n      }\n    },\n    class: \"nav-link\"\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\" Dodaj Ključni Momenat \")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"to\"])) : _createCommentVNode(\"v-if\", true), _createVNode(_component_router_link, {\n    to: `/milestone-list/${$setup.childId}`\n  }, {\n    default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"Pregled Kljucnog Momenta\")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"to\"]), _createVNode(_component_router_link, {\n    to: `/child-development/${$setup.childId}`\n  }, {\n    default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"Unos razvoja deteta\")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"to\"]), _createVNode(_component_router_link, {\n    to: `/child-development-list/${$setup.childId}`\n  }, {\n    default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"Pregled razvoja\")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"to\"]), _createVNode(_component_router_link, {\n    to: `/child-overview/${$setup.childId}`\n  }, {\n    default: _withCtx(() => _cache[7] || (_cache[7] = [_createTextVNode(\"Pregled sve Djece\")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"to\"])], 64 /* STABLE_FRAGMENT */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Auth links \"), !$setup.authStore.isAuthenticated ? (_openBlock(), _createBlock(_component_router_link, {\n    key: 3,\n    to: \"/login\"\n  }, {\n    default: _withCtx(() => _cache[8] || (_cache[8] = [_createTextVNode(\"Prijavite se\")])),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), !$setup.authStore.isAuthenticated ? (_openBlock(), _createBlock(_component_router_link, {\n    key: 4,\n    to: \"/\"\n  }, {\n    default: _withCtx(() => _cache[9] || (_cache[9] = [_createTextVNode(\"Registrujte se\")])),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), $setup.authStore.isAuthenticated ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 5,\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.logout && $setup.logout(...args)),\n    class: \"logout-btn\"\n  }, \"Odjavi se\")) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true), _createVNode(_component_router_view)]);\n}","map":{"version":3,"names":["key","_createElementBlock","$setup","showNavigation","_hoisted_1","_createCommentVNode","authStore","isAuthenticated","_createBlock","_component_router_link","to","default","_withCtx","_cache","_createTextVNode","_","hasChild","isDashboard","_Fragment","_ctx","currentChildId","class","_createVNode","childId","onClick","args","logout","_component_router_view"],"sources":["C:\\Users\\goldb\\Pro\\Project\\basic-booklet\\frontend\\src\\App.vue"],"sourcesContent":["<template>\n  <div>\n    <nav v-if=\"showNavigation\">\n      <!-- Dashboard link when authenticated -->\n      <router-link \n        v-if=\"authStore.isAuthenticated\" \n        to=\"/dashboard\"\n      >Dashboard</router-link>\n\n      <!-- Child registration only if no child -->\n      <router-link \n        v-if=\"authStore.isAuthenticated && !hasChild\" \n        to=\"/child-registration\"\n      >Registracija deteta</router-link>\n      \n      <!-- Other links only if has child and not on dashboard -->\n      <template v-if=\"authStore.isAuthenticated && hasChild && !isDashboard\">\n        <router-link \n          v-if=\"currentChildId\"\n          :to=\"{ \n            name: 'MilestoneForm',\n            params: { childId: currentChildId }\n          }\"\n          class=\"nav-link\"\n        >\n          Dodaj Ključni Momenat\n        </router-link>\n        <router-link :to=\"`/milestone-list/${childId}`\">Pregled Kljucnog Momenta</router-link>\n        <router-link :to=\"`/child-development/${childId}`\">Unos razvoja deteta</router-link>\n        <router-link :to=\"`/child-development-list/${childId}`\">Pregled razvoja</router-link>\n        <router-link :to=\"`/child-overview/${childId}`\">Pregled sve Djece</router-link>\n      </template>\n\n      <!-- Auth links -->\n      <router-link v-if=\"!authStore.isAuthenticated\" to=\"/login\">Prijavite se</router-link>\n      <router-link v-if=\"!authStore.isAuthenticated\" to=\"/\">Registrujte se</router-link>\n\n      <button v-if=\"authStore.isAuthenticated\" @click=\"logout\" class=\"logout-btn\">Odjavi se</button>\n    </nav>\n\n    <router-view />\n  </div>\n</template>\n\n<script>\nimport { useAuthStore } from './stores/authStore';\nimport { useRouter, useRoute } from 'vue-router';\nimport { computed } from 'vue';\n\nexport default {\n  setup() {\n    const authStore = useAuthStore();\n    const router = useRouter();\n    const route = useRoute();\n\n    const childId = computed(() => authStore.childId || sessionStorage.getItem('childId'));\n    const hasChild = computed(() => !!childId.value);\n    \n    // Check if current route is dashboard\n    const isDashboard = computed(() => route.name === 'dashboard');\n\n    // Determine when to show navigation\n    const showNavigation = computed(() => {\n      // Hide navigation on login and signup pages\n      if (route.name === 'login' || route.name === 'signup') {\n        return false;\n      }\n      \n      // Show navigation on dashboard\n      if (route.name === 'dashboard') {\n        return true;\n      }\n      \n      // Show navigation on other pages when authenticated and has child\n      return authStore.isAuthenticated && hasChild.value;\n    });\n\n    const logout = () => {\n      authStore.logout();\n      sessionStorage.removeItem('token');\n      sessionStorage.removeItem('childId');\n      router.push('/login');\n    };\n\n    // Check authentication status on component mount\n    authStore.checkAuth();\n\n    return { \n      authStore, \n      logout,\n      childId,\n      hasChild,\n      isDashboard,\n      showNavigation\n    };\n  }\n};\n</script>\n\n<style scoped>\nnav {\n  margin-bottom: 20px;\n  padding: 15px;\n  background-color: #f8f9fa;\n  border-bottom: 1px solid #dee2e6;\n}\n\nnav a {\n  margin-right: 15px;\n  text-decoration: none;\n  color: #007bff;\n  padding: 5px 10px;\n  border-radius: 4px;\n  transition: all 0.3s ease;\n}\n\nnav a:hover {\n  background-color: #007bff;\n  color: white;\n}\n\nnav a.router-link-active {\n  background-color: #007bff;\n  color: white;\n}\n\n.logout-btn {\n  padding: 8px 16px;\n  background-color: #690aa8;  \n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 16px;\n  transition: background-color 0.3s, transform 0.3s;\n  margin-left: 20px;\n}\n\n.logout-btn:hover {\n  background-color: #250891;  \n  transform: scale(1.05);  \n}\n\n.logout-btn:focus {\n  outline: none;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}