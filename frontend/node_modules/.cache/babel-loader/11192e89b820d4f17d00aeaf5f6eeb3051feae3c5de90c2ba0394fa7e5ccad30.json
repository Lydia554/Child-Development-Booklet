{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { useAuthStore } from './stores/authStore';\nimport { useRouter, useRoute } from 'vue-router';\nimport { computed } from 'vue';\nexport default {\n  setup() {\n    const authStore = useAuthStore();\n    const router = useRouter();\n    const route = useRoute();\n    const childId = computed(() => authStore.childId || sessionStorage.getItem('childId'));\n    const hasChild = computed(() => !!childId.value);\n\n    // Check if current route is dashboard\n    const isDashboard = computed(() => route.name === 'dashboard');\n\n    // Determine when to show navigation\n    const showNavigation = computed(() => {\n      // Hide navigation on login and signup pages\n      if (route.name === 'login' || route.name === 'signup') {\n        return false;\n      }\n\n      // Show navigation on dashboard\n      if (route.name === 'dashboard') {\n        return true;\n      }\n\n      // Show navigation on other pages when authenticated and has child\n      return authStore.isAuthenticated && hasChild.value;\n    });\n    const logout = () => {\n      authStore.logout();\n      sessionStorage.removeItem('token');\n      sessionStorage.removeItem('childId');\n      router.push('/login');\n    };\n\n    // Check authentication status on component mount\n    authStore.checkAuth();\n    return {\n      authStore,\n      logout,\n      childId,\n      hasChild,\n      isDashboard,\n      showNavigation\n    };\n  }\n};","map":{"version":3,"names":["useAuthStore","useRouter","useRoute","computed","setup","authStore","router","route","childId","sessionStorage","getItem","hasChild","value","isDashboard","name","showNavigation","isAuthenticated","logout","removeItem","push","checkAuth"],"sources":["C:\\Users\\goldb\\Pro\\Project\\basic-booklet\\frontend\\src\\App.vue"],"sourcesContent":["<template>\n  <div>\n    <nav v-if=\"showNavigation\">\n      <!-- Dashboard link when authenticated -->\n      <router-link v-if=\"authStore.isAuthenticated\" to=\"`/child-overview/${childId}`\"\n      >Pregled sve Dece</router-link>\n\n      <!-- Child registration only if no child -->\n      <router-link \n        v-if=\"authStore.isAuthenticated && !hasChild\" \n        to=\"/child-registration\"\n      >Registracija deteta</router-link>\n      \n      <!-- Other links only if has child and not on dashboard -->\n      <template v-if=\"authStore.isAuthenticated && hasChild && !isDashboard\">\n        <router-link :to=\"`/milestone-form/${childId}`\">Dodaj Milestone</router-link>\n        <router-link :to=\"`/milestone-list/${childId}`\">Pregled Milestone-a</router-link>\n        <router-link :to=\"`/child-development-form/${childId}`\">Unos razvoja deteta</router-link>\n        <router-link :to=\"`/child-development-list/${childId}`\">Pregled razvoja</router-link>\n      \n      </template>\n\n      <!-- Auth links -->\n      <router-link v-if=\"!authStore.isAuthenticated\" to=\"/login\">Prijavite se</router-link>\n      <router-link v-if=\"!authStore.isAuthenticated\" to=\"/\">Registrujte se</router-link>\n\n      <button v-if=\"authStore.isAuthenticated\" @click=\"logout\" class=\"logout-btn\">Odjavi se</button>\n    </nav>\n\n    <router-view />\n  </div>\n</template>\n\n<script>\nimport { useAuthStore } from './stores/authStore';\nimport { useRouter, useRoute } from 'vue-router';\nimport { computed } from 'vue';\n\nexport default {\n  setup() {\n    const authStore = useAuthStore();\n    const router = useRouter();\n    const route = useRoute();\n\n    const childId = computed(() => authStore.childId || sessionStorage.getItem('childId'));\n    const hasChild = computed(() => !!childId.value);\n    \n    // Check if current route is dashboard\n    const isDashboard = computed(() => route.name === 'dashboard');\n\n    // Determine when to show navigation\n    const showNavigation = computed(() => {\n      // Hide navigation on login and signup pages\n      if (route.name === 'login' || route.name === 'signup') {\n        return false;\n      }\n      \n      // Show navigation on dashboard\n      if (route.name === 'dashboard') {\n        return true;\n      }\n      \n      // Show navigation on other pages when authenticated and has child\n      return authStore.isAuthenticated && hasChild.value;\n    });\n\n    const logout = () => {\n      authStore.logout();\n      sessionStorage.removeItem('token');\n      sessionStorage.removeItem('childId');\n      router.push('/login');\n    };\n\n    // Check authentication status on component mount\n    authStore.checkAuth();\n\n    return { \n      authStore, \n      logout,\n      childId,\n      hasChild,\n      isDashboard,\n      showNavigation\n    };\n  }\n};\n</script>\n\n<style scoped>\nnav {\n  margin-bottom: 20px;\n  padding: 15px;\n  background-color: #f8f9fa;\n  border-bottom: 1px solid #dee2e6;\n}\n\nnav a {\n  margin-right: 15px;\n  text-decoration: none;\n  color: #007bff;\n  padding: 5px 10px;\n  border-radius: 4px;\n  transition: all 0.3s ease;\n}\n\nnav a:hover {\n  background-color: #007bff;\n  color: white;\n}\n\nnav a.router-link-active {\n  background-color: #007bff;\n  color: white;\n}\n\n.logout-btn {\n  padding: 8px 16px;\n  background-color: #690aa8;  \n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 16px;\n  transition: background-color 0.3s, transform 0.3s;\n  margin-left: 20px;\n}\n\n.logout-btn:hover {\n  background-color: #250891;  \n  transform: scale(1.05);  \n}\n\n.logout-btn:focus {\n  outline: none;\n}\n</style>"],"mappings":";AAkCA,SAASA,YAAW,QAAS,oBAAoB;AACjD,SAASC,SAAS,EAAEC,QAAO,QAAS,YAAY;AAChD,SAASC,QAAO,QAAS,KAAK;AAE9B,eAAe;EACbC,KAAKA,CAAA,EAAG;IACN,MAAMC,SAAQ,GAAIL,YAAY,CAAC,CAAC;IAChC,MAAMM,MAAK,GAAIL,SAAS,CAAC,CAAC;IAC1B,MAAMM,KAAI,GAAIL,QAAQ,CAAC,CAAC;IAExB,MAAMM,OAAM,GAAIL,QAAQ,CAAC,MAAME,SAAS,CAACG,OAAM,IAAKC,cAAc,CAACC,OAAO,CAAC,SAAS,CAAC,CAAC;IACtF,MAAMC,QAAO,GAAIR,QAAQ,CAAC,MAAM,CAAC,CAACK,OAAO,CAACI,KAAK,CAAC;;IAEhD;IACA,MAAMC,WAAU,GAAIV,QAAQ,CAAC,MAAMI,KAAK,CAACO,IAAG,KAAM,WAAW,CAAC;;IAE9D;IACA,MAAMC,cAAa,GAAIZ,QAAQ,CAAC,MAAM;MACpC;MACA,IAAII,KAAK,CAACO,IAAG,KAAM,OAAM,IAAKP,KAAK,CAACO,IAAG,KAAM,QAAQ,EAAE;QACrD,OAAO,KAAK;MACd;;MAEA;MACA,IAAIP,KAAK,CAACO,IAAG,KAAM,WAAW,EAAE;QAC9B,OAAO,IAAI;MACb;;MAEA;MACA,OAAOT,SAAS,CAACW,eAAc,IAAKL,QAAQ,CAACC,KAAK;IACpD,CAAC,CAAC;IAEF,MAAMK,MAAK,GAAIA,CAAA,KAAM;MACnBZ,SAAS,CAACY,MAAM,CAAC,CAAC;MAClBR,cAAc,CAACS,UAAU,CAAC,OAAO,CAAC;MAClCT,cAAc,CAACS,UAAU,CAAC,SAAS,CAAC;MACpCZ,MAAM,CAACa,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;;IAED;IACAd,SAAS,CAACe,SAAS,CAAC,CAAC;IAErB,OAAO;MACLf,SAAS;MACTY,MAAM;MACNT,OAAO;MACPG,QAAQ;MACRE,WAAW;MACXE;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}