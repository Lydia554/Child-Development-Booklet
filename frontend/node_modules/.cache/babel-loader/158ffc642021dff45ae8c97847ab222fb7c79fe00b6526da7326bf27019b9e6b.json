{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      children: [],\n      selectedChildId: '',\n      loading: true,\n      error: null\n    };\n  },\n  computed: {\n    selectedChild() {\n      return this.children.find(child => child._id === this.selectedChildId);\n    }\n  },\n  async created() {\n    console.log('Token:', sessionStorage.getItem('token'));\n    try {\n      this.loading = true;\n      await this.fetchChildren();\n      const routeChildId = this.$route.params.childId;\n      if (routeChildId && this.children.some(child => child._id === routeChildId)) {\n        this.selectedChildId = routeChildId;\n      }\n    } catch (error) {\n      console.error('Error in created hook:', error);\n      this.error = 'Greška pri učitavanju podataka. Molimo pokušajte ponovo.';\n    } finally {\n      this.loading = false;\n    }\n  },\n  methods: {\n    async fetchChildren() {\n      try {\n        const token = sessionStorage.getItem('token');\n        if (!token) {\n          this.error = 'Niste prijavljeni. Molimo prijavite se.';\n          return;\n        }\n        console.log('Fetching children...');\n        const response = await axios.get('http://localhost:5000/api/children', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        console.log('Children data:', response.data);\n        this.children = response.data;\n        if (this.children.length === 0) {\n          this.error = 'Nema registrovane dece. Molimo prvo registrujte dete.';\n        }\n      } catch (error) {\n        console.error('Error fetching children:', error);\n        if (error.response?.status === 404) {\n          this.error = 'Resurs nije pronađen. Molimo proverite URL.';\n        } else if (error.response?.status === 401) {\n          this.error = 'Sesija je istekla. Molimo prijavite se ponovo.';\n          sessionStorage.removeItem('token');\n          this.$router.push('/login');\n        } else {\n          this.error = 'Greška pri učitavanju dece. Molimo pokušajte ponovo.';\n        }\n      }\n    },\n    handleChildSelect() {\n      if (this.selectedChildId) {\n        console.log('Selected child:', this.selectedChild);\n      }\n    },\n    formatDate(date) {\n      try {\n        return new Date(date).toLocaleDateString('sr-RS');\n      } catch (error) {\n        console.error('Error formatting date:', error);\n        return 'Neispravan datum';\n      }\n    },\n    calculateAge(birthDate) {\n      try {\n        const birth = new Date(birthDate);\n        const now = new Date();\n        const months = (now.getFullYear() - birth.getFullYear()) * 12 + (now.getMonth() - birth.getMonth());\n        if (months < 12) {\n          return `${months} meseci`;\n        } else {\n          const years = Math.floor(months / 12);\n          const remainingMonths = months % 12;\n          return `${years} ${years === 1 ? 'godina' : 'godine'} i ${remainingMonths} meseci`;\n        }\n      } catch (error) {\n        console.error('Error calculating age:', error);\n        return 'Greška pri računanju uzrasta';\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","children","selectedChildId","loading","error","computed","selectedChild","find","child","_id","created","console","log","sessionStorage","getItem","fetchChildren","routeChildId","$route","params","childId","some","methods","token","response","get","headers","Authorization","length","status","removeItem","$router","push","handleChildSelect","formatDate","date","Date","toLocaleDateString","calculateAge","birthDate","birth","now","months","getFullYear","getMonth","years","Math","floor","remainingMonths"],"sources":["C:\\Users\\goldb\\Pro\\Project\\basic-booklet\\frontend\\src\\components\\ChildOverview.vue"],"sourcesContent":["<template>\r\n  <div class=\"child-selection-container\">\r\n    <h2 class=\"title\">Pregled sve Djece</h2>\r\n    \r\n    <!-- Debug info -->\r\n    <div v-if=\"loading\" class=\"debug-info\">\r\n      Učitavanje podataka...\r\n    </div>\r\n    <div v-if=\"error\" class=\"error-message\">\r\n      {{ error }}\r\n    </div>\r\n\r\n    <!-- Child selection -->\r\n    <div class=\"select-container\">\r\n      <select v-model=\"selectedChildId\" class=\"child-select\" @change=\"handleChildSelect\">\r\n        <option value=\"\">Izaberite dete</option>\r\n        <option v-for=\"child in children\" \r\n                :key=\"child._id\" \r\n                :value=\"child._id\">\r\n          {{ child.name }}\r\n        </option>\r\n      </select>\r\n    </div>\r\n\r\n    <!-- Selected child info -->\r\n    <div v-if=\"selectedChild\" class=\"child-info\">\r\n      <p><strong>Ime:</strong> {{ selectedChild.name }}</p>\r\n      <p><strong>Datum rođenja:</strong> {{ formatDate(selectedChild.birthDate) }}</p>\r\n      <p><strong>Uzrast:</strong> {{ calculateAge(selectedChild.birthDate) }}</p>\r\n    </div>\r\n\r\n    <!-- Navigation links -->\r\n    <div v-if=\"selectedChildId\" class=\"links-container\">\r\n      \r\n      <router-link :to=\"`/milestone-list/${selectedChildId}`\" class=\"link\">\r\n        Pregled Ključnih Momenata\r\n      </router-link>\r\n   \r\n      <router-link :to=\"`/child-development-list/${selectedChildId}`\" class=\"link\">\r\n        Pregled Razvoja\r\n      </router-link>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      children: [], \r\n      selectedChildId: '',\r\n      loading: true,\r\n      error: null\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    selectedChild() {\r\n      return this.children.find(child => child._id === this.selectedChildId);\r\n    }\r\n  },\r\n\r\n  async created() {\r\n    console.log('Token:', sessionStorage.getItem('token'));\r\n    try {\r\n      this.loading = true;\r\n      await this.fetchChildren();\r\n      \r\n      const routeChildId = this.$route.params.childId;\r\n      if (routeChildId && this.children.some(child => child._id === routeChildId)) {\r\n        this.selectedChildId = routeChildId;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error in created hook:', error);\r\n      this.error = 'Greška pri učitavanju podataka. Molimo pokušajte ponovo.';\r\n    } finally {\r\n      this.loading = false;\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    async fetchChildren() {\r\n      try {\r\n        const token = sessionStorage.getItem('token');\r\n        if (!token) {\r\n          this.error = 'Niste prijavljeni. Molimo prijavite se.';\r\n          return;\r\n        }\r\n\r\n        console.log('Fetching children...');\r\n        const response = await axios.get('http://localhost:5000/api/children', {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n        \r\n        console.log('Children data:', response.data);\r\n        this.children = response.data;\r\n        \r\n        if (this.children.length === 0) {\r\n          this.error = 'Nema registrovane dece. Molimo prvo registrujte dete.';\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching children:', error);\r\n        if (error.response?.status === 404) {\r\n          this.error = 'Resurs nije pronađen. Molimo proverite URL.';\r\n        } else if (error.response?.status === 401) {\r\n          this.error = 'Sesija je istekla. Molimo prijavite se ponovo.';\r\n          sessionStorage.removeItem('token');\r\n          this.$router.push('/login');\r\n        } else {\r\n          this.error = 'Greška pri učitavanju dece. Molimo pokušajte ponovo.';\r\n        }\r\n      }\r\n    },\r\n\r\n    handleChildSelect() {\r\n      if (this.selectedChildId) {\r\n        console.log('Selected child:', this.selectedChild);\r\n      }\r\n    },\r\n\r\n    formatDate(date) {\r\n      try {\r\n        return new Date(date).toLocaleDateString('sr-RS');\r\n      } catch (error) {\r\n        console.error('Error formatting date:', error);\r\n        return 'Neispravan datum';\r\n      }\r\n    },\r\n\r\n    calculateAge(birthDate) {\r\n      try {\r\n        const birth = new Date(birthDate);\r\n        const now = new Date();\r\n        const months = (now.getFullYear() - birth.getFullYear()) * 12 + \r\n                      (now.getMonth() - birth.getMonth());\r\n        \r\n        if (months < 12) {\r\n          return `${months} meseci`;\r\n        } else {\r\n          const years = Math.floor(months / 12);\r\n          const remainingMonths = months % 12;\r\n          return `${years} ${years === 1 ? 'godina' : 'godine'} i ${remainingMonths} meseci`;\r\n        }\r\n      } catch (error) {\r\n        console.error('Error calculating age:', error);\r\n        return 'Greška pri računanju uzrasta';\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.child-selection-container {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  background-color: #f9f9f9;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n\r\n  .debug-info {\r\n    background-color: #e3f2fd;\r\n    padding: 10px;\r\n    margin-bottom: 15px;\r\n    border-radius: 4px;\r\n    text-align: center;\r\n    color: #1976d2;\r\n  }\r\n\r\n  .error-message {\r\n    background-color: #ffebee;\r\n    padding: 10px;\r\n    margin-bottom: 15px;\r\n    border-radius: 4px;\r\n    text-align: center;\r\n    color: #c62828;\r\n  }\r\n\r\n  .title {\r\n    text-align: center;\r\n    font-size: 24px;\r\n    color: #333;\r\n    margin-bottom: 20px;\r\n  }\r\n\r\n  .select-container {\r\n    margin-bottom: 20px;\r\n\r\n    .child-select {\r\n      width: 100%;\r\n      padding: 12px;\r\n      font-size: 16px;\r\n      border-radius: 4px;\r\n      border: 1px solid #ccc;\r\n      background-color: #fff;\r\n      color: #333;\r\n      outline: none;\r\n      \r\n      &:focus {\r\n        border-color: #007bff;\r\n      }\r\n    }\r\n  }\r\n\r\n  .child-info {\r\n    background-color: #fff;\r\n    padding: 15px;\r\n    border-radius: 4px;\r\n    margin-bottom: 20px;\r\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\r\n\r\n    p {\r\n      margin: 8px 0;\r\n      color: #666;\r\n\r\n      strong {\r\n        color: #333;\r\n      }\r\n    }\r\n  }\r\n\r\n  .links-container {\r\n    display: grid;\r\n    grid-template-columns: repeat(2, 1fr);\r\n    gap: 15px;\r\n    margin-top: 20px;\r\n\r\n    .link {\r\n      padding: 12px;\r\n      color: #fff;\r\n      background-color: #007bff;\r\n      text-decoration: none;\r\n      text-align: center;\r\n      border-radius: 4px;\r\n      transition: all 0.3s ease;\r\n\r\n      &:hover {\r\n        background-color: #0056b3;\r\n        transform: translateY(-2px);\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}