{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { defineStore } from 'pinia';\nexport const useAuthStore = defineStore('auth', {\n  state: () => ({\n    isAuthenticated: false,\n    childIds: [],\n    // Store all child IDs for the user\n    currentChildId: null // Store the currently selected child's ID\n  }),\n  getters: {\n    hasChild: state => state.childIds.length > 0,\n    childId: state => state.currentChildId\n  },\n  actions: {\n    login(token, childId = null) {\n      this.isAuthenticated = true;\n      sessionStorage.setItem('token', token);\n      if (childId) {\n        this.addChildId(childId);\n      }\n    },\n    logout() {\n      this.isAuthenticated = false;\n      this.childIds = [];\n      this.currentChildId = null;\n      sessionStorage.removeItem('token');\n      sessionStorage.removeItem('childId');\n      sessionStorage.removeItem('childIds');\n    },\n    checkAuth() {\n      const token = sessionStorage.getItem('token');\n      const childId = sessionStorage.getItem('childId');\n      const childIds = JSON.parse(sessionStorage.getItem('childIds') || '[]');\n      this.isAuthenticated = !!token;\n      this.childIds = childIds;\n      this.currentChildId = childId || null;\n    },\n    addChildId(childId) {\n      if (!this.childIds.includes(childId)) {\n        this.childIds.push(childId);\n        sessionStorage.setItem('childIds', JSON.stringify(this.childIds));\n      }\n      this.setCurrentChildId(childId);\n    },\n    setCurrentChildId(childId) {\n      this.currentChildId = childId;\n      sessionStorage.setItem('childId', childId);\n    }\n  }\n});","map":{"version":3,"names":["defineStore","useAuthStore","state","isAuthenticated","childIds","currentChildId","getters","hasChild","length","childId","actions","login","token","sessionStorage","setItem","addChildId","logout","removeItem","checkAuth","getItem","JSON","parse","includes","push","stringify","setCurrentChildId"],"sources":["C:/Users/goldb/Pro/Project/basic-booklet/frontend/src/stores/authStore.js"],"sourcesContent":["import { defineStore } from 'pinia';\r\n\r\nexport const useAuthStore = defineStore('auth', {\r\n  state: () => ({\r\n    isAuthenticated: false,\r\n    childIds: [], // Store all child IDs for the user\r\n    currentChildId: null, // Store the currently selected child's ID\r\n  }),\r\n\r\n  getters: {\r\n    hasChild: (state) => state.childIds.length > 0,\r\n    childId: (state) => state.currentChildId,\r\n  },\r\n\r\n  actions: {\r\n    login(token, childId = null) {\r\n      this.isAuthenticated = true;\r\n      sessionStorage.setItem('token', token);\r\n      \r\n      if (childId) {\r\n        this.addChildId(childId);\r\n      }\r\n    },\r\n\r\n    logout() {\r\n      this.isAuthenticated = false;\r\n      this.childIds = [];\r\n      this.currentChildId = null;\r\n      sessionStorage.removeItem('token');\r\n      sessionStorage.removeItem('childId');\r\n      sessionStorage.removeItem('childIds');\r\n    },\r\n\r\n    checkAuth() {\r\n      const token = sessionStorage.getItem('token');\r\n      const childId = sessionStorage.getItem('childId');\r\n      const childIds = JSON.parse(sessionStorage.getItem('childIds') || '[]');\r\n      \r\n      this.isAuthenticated = !!token;\r\n      this.childIds = childIds;\r\n      this.currentChildId = childId || null;\r\n    },\r\n\r\n    addChildId(childId) {\r\n      if (!this.childIds.includes(childId)) {\r\n        this.childIds.push(childId);\r\n        sessionStorage.setItem('childIds', JSON.stringify(this.childIds));\r\n      }\r\n      this.setCurrentChildId(childId);\r\n    },\r\n\r\n    setCurrentChildId(childId) {\r\n      this.currentChildId = childId;\r\n      sessionStorage.setItem('childId', childId);\r\n    }\r\n  }\r\n});"],"mappings":";AAAA,SAASA,WAAW,QAAQ,OAAO;AAEnC,OAAO,MAAMC,YAAY,GAAGD,WAAW,CAAC,MAAM,EAAE;EAC9CE,KAAK,EAAEA,CAAA,MAAO;IACZC,eAAe,EAAE,KAAK;IACtBC,QAAQ,EAAE,EAAE;IAAE;IACdC,cAAc,EAAE,IAAI,CAAE;EACxB,CAAC,CAAC;EAEFC,OAAO,EAAE;IACPC,QAAQ,EAAGL,KAAK,IAAKA,KAAK,CAACE,QAAQ,CAACI,MAAM,GAAG,CAAC;IAC9CC,OAAO,EAAGP,KAAK,IAAKA,KAAK,CAACG;EAC5B,CAAC;EAEDK,OAAO,EAAE;IACPC,KAAKA,CAACC,KAAK,EAAEH,OAAO,GAAG,IAAI,EAAE;MAC3B,IAAI,CAACN,eAAe,GAAG,IAAI;MAC3BU,cAAc,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;MAEtC,IAAIH,OAAO,EAAE;QACX,IAAI,CAACM,UAAU,CAACN,OAAO,CAAC;MAC1B;IACF,CAAC;IAEDO,MAAMA,CAAA,EAAG;MACP,IAAI,CAACb,eAAe,GAAG,KAAK;MAC5B,IAAI,CAACC,QAAQ,GAAG,EAAE;MAClB,IAAI,CAACC,cAAc,GAAG,IAAI;MAC1BQ,cAAc,CAACI,UAAU,CAAC,OAAO,CAAC;MAClCJ,cAAc,CAACI,UAAU,CAAC,SAAS,CAAC;MACpCJ,cAAc,CAACI,UAAU,CAAC,UAAU,CAAC;IACvC,CAAC;IAEDC,SAASA,CAAA,EAAG;MACV,MAAMN,KAAK,GAAGC,cAAc,CAACM,OAAO,CAAC,OAAO,CAAC;MAC7C,MAAMV,OAAO,GAAGI,cAAc,CAACM,OAAO,CAAC,SAAS,CAAC;MACjD,MAAMf,QAAQ,GAAGgB,IAAI,CAACC,KAAK,CAACR,cAAc,CAACM,OAAO,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC;MAEvE,IAAI,CAAChB,eAAe,GAAG,CAAC,CAACS,KAAK;MAC9B,IAAI,CAACR,QAAQ,GAAGA,QAAQ;MACxB,IAAI,CAACC,cAAc,GAAGI,OAAO,IAAI,IAAI;IACvC,CAAC;IAEDM,UAAUA,CAACN,OAAO,EAAE;MAClB,IAAI,CAAC,IAAI,CAACL,QAAQ,CAACkB,QAAQ,CAACb,OAAO,CAAC,EAAE;QACpC,IAAI,CAACL,QAAQ,CAACmB,IAAI,CAACd,OAAO,CAAC;QAC3BI,cAAc,CAACC,OAAO,CAAC,UAAU,EAAEM,IAAI,CAACI,SAAS,CAAC,IAAI,CAACpB,QAAQ,CAAC,CAAC;MACnE;MACA,IAAI,CAACqB,iBAAiB,CAAChB,OAAO,CAAC;IACjC,CAAC;IAEDgB,iBAAiBA,CAAChB,OAAO,EAAE;MACzB,IAAI,CAACJ,cAAc,GAAGI,OAAO;MAC7BI,cAAc,CAACC,OAAO,CAAC,SAAS,EAAEL,OAAO,CAAC;IAC5C;EACF;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}