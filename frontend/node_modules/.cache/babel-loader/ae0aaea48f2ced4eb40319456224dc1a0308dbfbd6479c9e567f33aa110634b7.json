{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { defineStore } from 'pinia';\nexport const useAuthStore = defineStore('auth', {\n  state: () => ({\n    isAuthenticated: false,\n    token: null,\n    childIds: [],\n    currentChildId: null\n  }),\n  getters: {\n    hasChild: state => state.childIds.length > 0,\n    childId: state => state.currentChildId\n  },\n  actions: {\n    login(token, childId = null) {\n      if (!token) {\n        console.error(\"‚ùå Poku≈°aj da se saƒçuva undefined token!\");\n        return;\n      }\n      console.log(\"üîë ƒåuvanje tokena u authStore:\", token);\n      this.isAuthenticated = true;\n      this.token = token;\n      sessionStorage.setItem('token', token);\n      if (childId) {\n        this.addChildId(childId);\n      }\n    },\n    logout() {\n      console.log(\"üö™ Odjava, brisanje tokena...\");\n      this.isAuthenticated = false;\n      this.token = null;\n      this.childIds = [];\n      this.currentChildId = null;\n      sessionStorage.removeItem('token');\n      sessionStorage.removeItem('childId');\n      sessionStorage.removeItem('childIds');\n    },\n    checkAuth() {\n      const token = sessionStorage.getItem('token');\n      const childId = sessionStorage.getItem('childId');\n      const childIds = JSON.parse(sessionStorage.getItem('childIds') || '[]');\n      if (token) {\n        console.log(\"‚úÖ Token pronaƒëen u sessionStorage:\", token);\n        this.isAuthenticated = true;\n        this.token = token;\n        this.childIds = childIds;\n        this.currentChildId = childId || null;\n      } else {\n        console.warn(\"‚ö†Ô∏è Token nije pronaƒëen u sessionStorage.\");\n      }\n    },\n    addChildId(childId) {\n      if (!this.childIds.includes(childId)) {\n        this.childIds.push(childId);\n        sessionStorage.setItem('childIds', JSON.stringify(this.childIds));\n      }\n      this.setCurrentChildId(childId);\n    },\n    setCurrentChildId(childId) {\n      this.currentChildId = childId;\n      sessionStorage.setItem('childId', childId);\n    }\n  }\n});","map":{"version":3,"names":["defineStore","useAuthStore","state","isAuthenticated","token","childIds","currentChildId","getters","hasChild","length","childId","actions","login","console","error","log","sessionStorage","setItem","addChildId","logout","removeItem","checkAuth","getItem","JSON","parse","warn","includes","push","stringify","setCurrentChildId"],"sources":["C:/Users/goldb/Pro/Child-Development-Booklet/frontend/src/stores/authStore.js"],"sourcesContent":["import { defineStore } from 'pinia';\r\n\r\nexport const useAuthStore = defineStore('auth', {\r\n  state: () => ({\r\n    isAuthenticated: false,\r\n    token: null, \r\n    childIds: [],\r\n    currentChildId: null, \r\n  }),\r\n\r\n  getters: {\r\n    hasChild: (state) => state.childIds.length > 0,\r\n    childId: (state) => state.currentChildId,\r\n  },\r\n\r\n  actions: {\r\n    login(token, childId = null) {\r\n      if (!token) {\r\n        console.error(\"‚ùå Poku≈°aj da se saƒçuva undefined token!\");\r\n        return;\r\n      }\r\n\r\n      console.log(\"üîë ƒåuvanje tokena u authStore:\", token);\r\n      this.isAuthenticated = true;\r\n      this.token = token;\r\n      sessionStorage.setItem('token', token); \r\n\r\n      if (childId) {\r\n        this.addChildId(childId);\r\n      }\r\n    },\r\n\r\n    logout() {\r\n      console.log(\"üö™ Odjava, brisanje tokena...\");\r\n      this.isAuthenticated = false;\r\n      this.token = null;\r\n      this.childIds = [];\r\n      this.currentChildId = null;\r\n\r\n      sessionStorage.removeItem('token');\r\n      sessionStorage.removeItem('childId');\r\n      sessionStorage.removeItem('childIds');\r\n    },\r\n\r\n    checkAuth() {\r\n      const token = sessionStorage.getItem('token');\r\n      const childId = sessionStorage.getItem('childId');\r\n      const childIds = JSON.parse(sessionStorage.getItem('childIds') || '[]');\r\n\r\n      if (token) {\r\n        console.log(\"‚úÖ Token pronaƒëen u sessionStorage:\", token);\r\n        this.isAuthenticated = true;\r\n        this.token = token;\r\n        this.childIds = childIds;\r\n        this.currentChildId = childId || null;\r\n      } else {\r\n        console.warn(\"‚ö†Ô∏è Token nije pronaƒëen u sessionStorage.\");\r\n      }\r\n    },\r\n\r\n    addChildId(childId) {\r\n      if (!this.childIds.includes(childId)) {\r\n        this.childIds.push(childId);\r\n        sessionStorage.setItem('childIds', JSON.stringify(this.childIds));\r\n      }\r\n      this.setCurrentChildId(childId);\r\n    },\r\n\r\n    setCurrentChildId(childId) {\r\n      this.currentChildId = childId;\r\n      sessionStorage.setItem('childId', childId);\r\n    }\r\n  }\r\n});\r\n"],"mappings":";AAAA,SAASA,WAAW,QAAQ,OAAO;AAEnC,OAAO,MAAMC,YAAY,GAAGD,WAAW,CAAC,MAAM,EAAE;EAC9CE,KAAK,EAAEA,CAAA,MAAO;IACZC,eAAe,EAAE,KAAK;IACtBC,KAAK,EAAE,IAAI;IACXC,QAAQ,EAAE,EAAE;IACZC,cAAc,EAAE;EAClB,CAAC,CAAC;EAEFC,OAAO,EAAE;IACPC,QAAQ,EAAGN,KAAK,IAAKA,KAAK,CAACG,QAAQ,CAACI,MAAM,GAAG,CAAC;IAC9CC,OAAO,EAAGR,KAAK,IAAKA,KAAK,CAACI;EAC5B,CAAC;EAEDK,OAAO,EAAE;IACPC,KAAKA,CAACR,KAAK,EAAEM,OAAO,GAAG,IAAI,EAAE;MAC3B,IAAI,CAACN,KAAK,EAAE;QACVS,OAAO,CAACC,KAAK,CAAC,yCAAyC,CAAC;QACxD;MACF;MAEAD,OAAO,CAACE,GAAG,CAAC,gCAAgC,EAAEX,KAAK,CAAC;MACpD,IAAI,CAACD,eAAe,GAAG,IAAI;MAC3B,IAAI,CAACC,KAAK,GAAGA,KAAK;MAClBY,cAAc,CAACC,OAAO,CAAC,OAAO,EAAEb,KAAK,CAAC;MAEtC,IAAIM,OAAO,EAAE;QACX,IAAI,CAACQ,UAAU,CAACR,OAAO,CAAC;MAC1B;IACF,CAAC;IAEDS,MAAMA,CAAA,EAAG;MACPN,OAAO,CAACE,GAAG,CAAC,+BAA+B,CAAC;MAC5C,IAAI,CAACZ,eAAe,GAAG,KAAK;MAC5B,IAAI,CAACC,KAAK,GAAG,IAAI;MACjB,IAAI,CAACC,QAAQ,GAAG,EAAE;MAClB,IAAI,CAACC,cAAc,GAAG,IAAI;MAE1BU,cAAc,CAACI,UAAU,CAAC,OAAO,CAAC;MAClCJ,cAAc,CAACI,UAAU,CAAC,SAAS,CAAC;MACpCJ,cAAc,CAACI,UAAU,CAAC,UAAU,CAAC;IACvC,CAAC;IAEDC,SAASA,CAAA,EAAG;MACV,MAAMjB,KAAK,GAAGY,cAAc,CAACM,OAAO,CAAC,OAAO,CAAC;MAC7C,MAAMZ,OAAO,GAAGM,cAAc,CAACM,OAAO,CAAC,SAAS,CAAC;MACjD,MAAMjB,QAAQ,GAAGkB,IAAI,CAACC,KAAK,CAACR,cAAc,CAACM,OAAO,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC;MAEvE,IAAIlB,KAAK,EAAE;QACTS,OAAO,CAACE,GAAG,CAAC,oCAAoC,EAAEX,KAAK,CAAC;QACxD,IAAI,CAACD,eAAe,GAAG,IAAI;QAC3B,IAAI,CAACC,KAAK,GAAGA,KAAK;QAClB,IAAI,CAACC,QAAQ,GAAGA,QAAQ;QACxB,IAAI,CAACC,cAAc,GAAGI,OAAO,IAAI,IAAI;MACvC,CAAC,MAAM;QACLG,OAAO,CAACY,IAAI,CAAC,0CAA0C,CAAC;MAC1D;IACF,CAAC;IAEDP,UAAUA,CAACR,OAAO,EAAE;MAClB,IAAI,CAAC,IAAI,CAACL,QAAQ,CAACqB,QAAQ,CAAChB,OAAO,CAAC,EAAE;QACpC,IAAI,CAACL,QAAQ,CAACsB,IAAI,CAACjB,OAAO,CAAC;QAC3BM,cAAc,CAACC,OAAO,CAAC,UAAU,EAAEM,IAAI,CAACK,SAAS,CAAC,IAAI,CAACvB,QAAQ,CAAC,CAAC;MACnE;MACA,IAAI,CAACwB,iBAAiB,CAACnB,OAAO,CAAC;IACjC,CAAC;IAEDmB,iBAAiBA,CAACnB,OAAO,EAAE;MACzB,IAAI,CAACJ,cAAc,GAAGI,OAAO;MAC7BM,cAAc,CAACC,OAAO,CAAC,SAAS,EAAEP,OAAO,CAAC;IAC5C;EACF;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}